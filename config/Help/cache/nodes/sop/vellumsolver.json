{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "vellumsolver", "icon": "DOP/vellumsolver", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Vellum Solver"], "extent": [97, 115]}, {"type": "summary", "indent": 0, "text": ["Runs a dynamic Vellum simulation."], "extent": [115, 157]}, {"type": "para", "indent": 0, "text": ["The Vellum Solver is a wrapper around a DOP network to simplify the running of\nVellum solves."], "extent": [157, 252]}, {"type": "para", "indent": 0, "text": ["Like most Vellum SOPs, it is a three input SOP.   The first input is\nthe surface geometry to solve.  The second input should have the same\nnumber of points as the first, with point-to-point correspondence\neither with point numbers or ", {"type": "code", "text": ["id"]}, " attributes.   The second input\nalso should have special primitives describing the constraint relationships.\nConstraints are how the connectivity between points are defined and controlled\nand can be created with a Vellum Constraints SOP.   Note that the network tab\nmenu has several macros to refer to common setups, such as Vellum\nConfigure Cloth.   The third input provides the collision geometry.\nThe collision geometry should have matching topology frame-to-frame.\nIn addition, some types of packed geometry are recognized."], "extent": [252, 1019]}, {"type": "para", "indent": 0, "text": ["You can dive into the solver to add DOP nodes to apply special forces.\nYou can also use the ", {"scheme": "Node", "value": "/nodes/dop/vellumconstraintproperty", "type": "link", "text": ["Vellum Constraint Property"], "fullpath": "/nodes/dop/vellumconstraintproperty.html"}, "\nDOP to adjust the constraint properties during the solve using these\ninternal nodes."], "extent": [1019, 1260]}, {"type": "para", "indent": 0, "text": ["If using ", {"type": "code", "text": ["collisionignore"]}, ", the third input\u2019s object can be referred\nto as ", {"type": "code", "text": ["external"]}, " and the generated ground plane as ", {"type": "code", "text": ["groundplane"]}, "."], "extent": [1260, 1396]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1396, 1408], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reset Simulation"], "extent": [1408, 1427], "body": [{"type": "para", "indent": 4, "text": ["Clears the entire simulation cache."], "extent": [1448, 1489]}], "container": true, "attrs": {"id": "resimulate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Start Frame"], "extent": [1489, 1502], "body": [{"type": "para", "indent": 4, "text": ["What frame on the Houdini playbar that the simulation should begin at."], "extent": [1523, 1599]}], "container": true, "attrs": {"id": "startframe"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Solver"], "extent": [1599, 1612], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Solver Mode"], "extent": [1612, 1626], "body": [{"type": "para", "indent": 4, "text": ["Specifies the type of solve to perform.  ", {"type": "ui", "text": ["Full"]}, " provides the full\n    Vellum feature set.  The ", {"type": "ui", "text": ["Minimal"]}, " mode has reduced functionality,\n    is optimized for fast ", {"type": "ui", "text": ["Substeps"]}, ", and is particularly useful for\n    large grain and fluid simulations."], "extent": [1647, 1903]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "text": ["  The Minimal mode has several limitations:"], "role": "item", "extent": [1903, 1956], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["External collision geometry must be prepared with a \n          ", {"scheme": "Node", "value": "/nodes/sop/vdbcollider", "type": "link", "text": ["VDB Collider SOP"], "fullpath": "/nodes/sop/vdbcollider.html"}, "."], "extent": [1956, 2070]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Changing constraint topology in not supported \n          (e.g. breaking constraints, adding or deleting new constraints). However, emitting grains or fluid ", {"type": "em", "text": ["is"]}, " supported."], "extent": [2070, 2252]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Attach to Geometry constraints and Animated pins are not supported."], "extent": [2252, 2330]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["The built-in Wind forces only work on grains and fluid."], "extent": [2330, 2396]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["POP Forces are evaluated per-frame."], "extent": [2396, 2443]}], "container": true}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "solvermode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Scale"], "extent": [2443, 2455], "body": [{"type": "para", "indent": 4, "text": ["Scales the effective time of the Vellum solve.  This can be used to\n    create bullet-time like effects where the physics of the Vellum\n    solver run at a different rate than the Houdini playbar.  A\n    value of 2 will cause cloth to fall twice as fast, and 0.1\n    will slow it to a tenth the speed."], "extent": [2475, 2782]}], "container": true, "attrs": {"id": "timescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Global Substeps"], "extent": [2782, 2799], "body": [{"type": "para", "indent": 4, "text": ["Controls global substeps at the simulation level, as opposed to\n    the vellum-specific substeps."], "extent": [2821, 2924]}, {"type": "para", "indent": 4, "text": ["Global substeps are best used when you need to export the\n    substepped geometry or have specific substepping on colliders.\n    They will use more memory per frame, however, all the substeps\n    will be kept rather than just the final values each frame."], "extent": [2924, 3184]}], "container": true, "attrs": {"id": "substep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Substeps"], "extent": [3184, 3194], "body": [{"type": "para", "indent": 4, "text": ["Each frame will be broken into this number of substeps.  Additional\n    substeps are required for fast moving collisions or sudden forces."], "extent": [3213, 3357]}, {"type": "para", "indent": 4, "text": ["The default substeps can be very aggressive, usually if the\n    Vellum solver is too stretchy, raising substeps to 2 or 5 is\n    a good first start."], "extent": [3357, 3511]}], "container": true, "attrs": {"id": "substeps"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraint Iterations"], "extent": [3511, 3534], "body": [{"type": "para", "indent": 4, "text": ["Within each substep, this number of passes will be taken by the\n    constraint enforcement operations.   Stiff constraints can\n    require more iterations to converge.  A good starting point\n    is the diameter of the geometry - the number of edges between\n    the farthest points."], "extent": [3550, 3838]}], "container": true, "attrs": {"id": "niter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Smoothing Iterations"], "extent": [3838, 3860], "body": [{"type": "para", "indent": 4, "text": ["The default constraint iterations use a Gauss-Seidel approach that\n    is fast to converge.  However, if it doesn\u2019t fully converge due to\n    too high stiffness, or impossible configurations, it will leave the error\n    as bad looking triangles.  The smoothing iterations use a Jacobi\n    approach which is slower to converge but leaves error spread out\n    in a more attractive fashion.  The default of ten passes helps\n    smooth out error, but might need to be increased if the overall\n    ", {"type": "ui", "text": ["Constraint Iterations"]}, " is very high."], "extent": [3881, 4419]}], "container": true, "attrs": {"id": "smoothiter"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Collisions"], "extent": [4419, 4438], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Collisions"], "extent": [4438, 4458], "body": [{"type": "para", "indent": 4, "text": ["Controls if any collision detection is done at all."], "extent": [4485, 4542]}], "container": true, "attrs": {"id": "enablecollisions"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Self Collisions"], "extent": [4542, 4559], "body": [{"type": "para", "indent": 4, "text": ["Controls if self collisions are detected."], "extent": [4586, 4633]}], "container": true, "attrs": {"id": "doselfcollisions"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Plane"], "extent": [4633, 4647], "body": [{"type": "para", "indent": 4, "text": ["Adds a ground plane to the simulation.  The ground plane will\n    be visualized with a blue grid."], "extent": [4667, 4770]}], "container": true, "attrs": {"id": "useground"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Position"], "extent": [4770, 4787], "body": [{"type": "para", "indent": 4, "text": ["Location of the center of the ground plane."], "extent": [4807, 4857]}], "container": true, "attrs": {"id": "groundpos"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Collision Passes"], "extent": [4857, 4875], "body": [{"type": "para", "indent": 4, "text": ["Number of collision detection passes to perform.  These are interleaved\n    between the constraint iterations.  Since collision is expensive, it is\n    best to minimize this.   But frequent interleaving helps avoid tent-poling\n    effects where a small collider is fighting with the no-stretch constraints.\n    In practice we find 10 to be correct for most situations, and substeps\n    often being a better solution to increase quality."], "extent": [4900, 5343]}], "container": true, "attrs": {"id": "collisionsiter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Post Collision Passes"], "extent": [5343, 5366], "body": [{"type": "para", "indent": 4, "text": ["After all constraints are performed, a final round of collision detection\n    is done.   Collisions are often the most noticeable failure mode, and it\n    is ideal if the next frame can start with non-intersecting geometry.\n    Thus a final cleanup pass can achieve these requirements.   We have\n    found that ", {"type": "q", "text": ["number of stacked layers + 2"]}, " is a good estimate for this\n    number.   This allows the effect of the underlying collider to ripple\n    through the stacked layers fully."], "extent": [5394, 5881]}], "container": true, "attrs": {"id": "postcollisioniter"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Polish Passes"], "extent": [5881, 5896], "body": [{"type": "para", "indent": 4, "text": ["In any collision pass, any colliding pair may not be fully resolved.   This\n    number of additional collider-pair passes will be run until they are\n    resolved.  Since these are only performed on active colliders (and no new\n    collision search is done) this is very cheap."], "extent": [5920, 6203]}], "container": true, "attrs": {"id": "resolveallmax"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Layer Shock"], "extent": [6203, 6216], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["layer"]}, " integer point attribute is used to flag point as belonging\n    to different layers of cloth.  Higher numbers refer to higher layers.\n    Layer Shock will make lower layers this many times heavier during collision\n    evaluation, ensuring the higher layers will move out of their way.  The\n    rest of the dynamics are unaffected by this, and the difference is fixed\n    regardless of the number of layers between the two.  This can be thought\n    of as a way to dial between one-way layering of sims and fully coupled\n    sims."], "extent": [6237, 6782]}], "container": true, "attrs": {"id": "layershock"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Forces"], "extent": [6782, 6795], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Gravity"], "extent": [6795, 6805], "body": [{"type": "para", "indent": 4, "text": ["Uniform gravity force to apply."], "extent": [6823, 6861]}], "container": true, "attrs": {"id": "gravity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Built-in Wind"], "extent": [6861, 6876], "body": [{"type": "para", "indent": 4, "text": ["A uniform wind direction.  Since this is a drag force, a wind of zero\n    will act like still air and slow everything down; and a high wind will\n    speed cloth up to that speed."], "extent": [6891, 7075]}], "container": true, "attrs": {"id": "wind"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Built-in Wind Speed"], "extent": [7075, 7096], "body": [{"type": "para", "indent": 4, "text": ["A scale for the wind direction.  You can set a normalized\n    direction and then use this to set the actual wind speed, or use\n    this as a way to increase or decrease wind speed without affecting\n    the direction."], "extent": [7116, 7338]}], "container": true, "attrs": {"id": "windspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Built-in Wind Drag"], "extent": [7338, 7358], "body": [{"type": "para", "indent": 4, "text": ["The amount the particles are dragged by the wind force.  This is also\n    scaled by the tangential and normal drag forces specified on the\n    Vellum Constraints SOP to provide unequal drag depending on orientation."], "extent": [7377, 7598]}], "container": true, "attrs": {"id": "winddrag"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": "wind", "container": true, "type": "h", "indent": 0, "text": ["Wind Shadowing"], "extent": [7598, 7629], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Type"], "extent": [7629, 7636], "body": [{"type": "para", "indent": 4, "text": ["The method to use to compute wind shadow."], "extent": [7662, 7709]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [7709, 7719], "body": [{"type": "para", "indent": 8, "text": ["No wind shadowing effect is done."], "extent": [7719, 7761]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Ray"], "extent": [7761, 7770], "body": [{"type": "para", "indent": 8, "text": ["Rays are cast in the relative velocity of the particle to find\n        shadowing geometry, and the wind is changed to match the\n        shadowing geometry\u2019s velocity."], "extent": [7770, 7946]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "windshadow_type"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["External Shadow"], "extent": [7946, 7963], "body": [{"type": "para", "indent": 4, "text": ["Scale for how much shadow to apply when the external geometry is hit."], "extent": [1208, 1283]}], "container": true, "attrs": {"id": "windshadow_externalmask"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Self Shadow"], "extent": [8050, 8063], "body": [{"type": "para", "indent": 4, "text": ["Scale for how much shadow to apply when the geometry itself is hit."], "extent": [1315, 1392]}], "container": true, "attrs": {"id": "windshadow_selfmask"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Distance"], "extent": [8142, 8156], "body": [{"type": "para", "indent": 4, "text": ["The maximum distance to check for occlusions."], "extent": [2549, 2604]}], "container": true, "attrs": {"id": "windshadow_maxdistance:"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Self Shadow Bias"], "extent": [8248, 8266], "body": [{"type": "para", "indent": 4, "text": ["The distance to offset the ray from the particle. This is used to avoid self intersections if the node is used for self wind shadow."], "extent": [2631, 2769]}], "container": true, "attrs": {"id": "windshadow_raybias:"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Angle"], "extent": [8344, 8358], "body": [{"type": "para", "indent": 4, "text": ["The spread to send shadow rays.  A value of ", {"type": "code", "text": ["90"]}, " will sample the full hemisphere, and a value of ", {"type": "code", "text": ["180"]}, " will send rays in all directions."], "extent": [2803, 2945]}], "container": true, "attrs": {"id": "windshadow_coneangle:"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Samples"], "extent": [8440, 8456], "body": [{"type": "para", "indent": 4, "text": ["Number of samples to send randomly within the cone angle.  If the cone angle is zero, only one sample will be taken."], "extent": [2978, 3104]}], "container": true, "attrs": {"id": "windshadow_samples:"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Falloff by Distance"], "extent": [8534, 8555], "body": [{"type": "para", "indent": 4, "text": ["This ramp maps the distance of the particle to the to the output value of the mask."], "extent": [3143, 3236]}], "container": true, "attrs": {"id": "windshadow_maskfalloff:"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blur Wind Shadow"], "extent": [8641, 8659], "body": [{"type": "para", "indent": 4, "text": ["Apply blurring to the wind shadow mask and wind shadow velocity."], "extent": [1627, 1701]}], "container": true, "attrs": {"id": "windshadow_doblur"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blurring Iterations"], "extent": [8738, 8759], "body": [{"type": "para", "indent": 4, "text": ["The number of times the input geometry is blurred.  The higher the number, the more blurring."], "extent": [2048, 2147]}], "container": true, "attrs": {"id": "windshadow_blur_iterations"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blur Influence Type"], "extent": [8847, 8868], "body": [{"type": "para", "indent": 4, "text": ["Blurring relies on each point being able to see what its neighbors' attributes are.\n    This parameter determines how points see their neighbors.  "], "extent": [3871, 4028]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Connectivity"], "extent": [4028, 4046], "body": [{"type": "para", "indent": 8, "text": ["Neighbors are determined by mesh connectivity.  Each point mixes its attribute value with the value of its neighbors to achieve blurring."], "extent": [4046, 4193]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Proximity"], "extent": [4193, 4208], "body": [{"type": "para", "indent": 8, "text": ["Neighbors are determined by proximity.  Each point has a maximum number of neighbors given by the ", {"type": "ui", "text": ["Max Neighbors"]}, " parameter, where each neighbor must be within a certain distance away given by the ", {"type": "ui", "text": ["Proximity Radius"]}, " parameter."], "extent": [4208, 4448]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "windshadow_blur_influencetype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blur Proximity Radius"], "extent": [8967, 8990], "body": [{"type": "para", "indent": 4, "text": ["Determines how far points influence each other when ", {"type": "ui", "text": ["Influence Type"]}, " is set to proximity."], "extent": [4484, 4581]}], "container": true, "attrs": {"id": "windshadow_blur_proxrad"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blur Max Neighbors"], "extent": [9077, 9097], "body": [{"type": "para", "indent": 4, "text": ["Determines the maximum number of neighbors each point is permitted to have.  Large numbers of neighbors may reduce performance."], "extent": [4619, 4752]}], "container": true, "attrs": {"id": "windshadow_blur_maxneigh"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Damping"], "extent": [9186, 9204], "body": [{"type": "para", "indent": 4, "text": ["A more brute force approach to reducing dynamic velocity. The velocity is scaled directly by this amount, causing sudden movements to be quickly damped."], "extent": [9225, 9383]}], "container": true, "attrs": {"id": "veldamping"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Friction"], "extent": [9383, 9400], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Static Threshold"], "extent": [9400, 9419], "body": [{"type": "para", "indent": 4, "text": ["A threshold at which to apply full friction.  When the ratio of the tangential velocity and the normal impulse is less than this, the tangential velocity will be fully eliminated through friction.  This is roughly tan() of the slope angle that will allow sliding under gravity."], "extent": [9446, 9730]}], "container": true, "attrs": {"id": "static_threshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Dynamic Scale"], "extent": [9730, 9745], "body": [{"type": "para", "indent": 4, "text": ["If the static threshold fails, this controls what percentage the tangential velocity will be reduced in the dynamic friction case."], "extent": [9769, 9905]}], "container": true, "attrs": {"id": "dynamic_scale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable External"], "extent": [9905, 9922], "body": [{"type": "para", "indent": 4, "text": ["A scale factor on the amount of friction effect to apply for collisions with external geometry."], "extent": [9941, 10042]}], "container": true, "attrs": {"id": "friction"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Self"], "extent": [10042, 10055], "body": [{"type": "para", "indent": 4, "text": ["A scale factor on the amount of friction effect to apply for collisions with self geometry."], "extent": [10078, 10175]}], "container": true, "attrs": {"id": "selffriction"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Static Scale"], "extent": [10175, 10196], "body": [{"type": "para", "indent": 4, "text": ["A scale factor for the ground plane\u2019s static friction.  Useful to\n    create frictionless grounds."], "extent": [10222, 10326]}], "container": true, "attrs": {"id": "static_sdfscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ground Dynamic Scale"], "extent": [10326, 10348], "body": [{"type": "para", "indent": 4, "text": ["A scale factor for the ground plane\u2019s dynamic friction.  Useful to\n    create frictionless grounds."], "extent": [10375, 10480]}], "container": true, "attrs": {"id": "dynamic_sdfscale"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Simulation"], "extent": [10480, 10497], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Cache Enabled"], "extent": [10497, 10513], "body": [{"type": "para", "indent": 4, "text": ["Controls if the simulation is cached to memory."], "extent": [10536, 10589]}], "container": true, "attrs": {"id": "cacheenabled"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Memory (MB)"], "extent": [10589, 10608], "body": [{"type": "para", "indent": 4, "text": ["Maximum size of the memory cache."], "extent": [10631, 10670]}], "container": true, "attrs": {"id": "cachemaxsize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Enable Automatic Resimulation"], "extent": [10670, 10701], "body": [{"type": "para", "indent": 4, "text": ["When any parameter inside a DOP simulation is changed, or\n    when any referenced external node is changed, the cache of\n    the simulation is marked as invalid. If this parameter is\n    turned on, the next time the playbar is moved to reach a\n    simulation time of 0, the cache will be cleared and the\n    first simulation timestep will be recalculated. If the cache\n    is invalidated while at a simulation time of 0, the initial\n    state is recalculated immediately. If the current time is\n    beyond time 0, then the most recent timestep will be\n    recooked, and the cache beyond the current time will be\n    cleared. But all prior timesteps will be left untouched\n    other than to be marked invalid. If this parameter is off,\n    the cache is marked as invalid in exactly the same way, but\n    the cache is never cleared automatically. To recook a\n    simulation in this mode, the Recook Simulation button on\n    this parameter dialog or above the viewport must be used."], "extent": [10720, 11705]}], "container": true, "attrs": {"id": "autoresim"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Simulation Type"], "extent": [11705, 11722], "body": [{"type": "para", "indent": 4, "text": ["Style of the simulation."], "extent": [11747, 11777]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Quasistatic"], "extent": [11777, 11794], "body": [{"type": "para", "indent": 12, "text": ["Each frame the simulation takes the inputs and runs them forward the given number of frames.  The final result becomes that frames result.   No frame-to-frame coherency is present."], "extent": [11794, 11988]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Dynamic"], "extent": [11988, 12001], "body": [{"type": "para", "indent": 12, "text": ["Each frame is solved from the previous frame, and the inputs are used to setup the first frame only."], "extent": [12001, 12115]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "simulationtype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Quasistatic Frames"], "extent": [12115, 12135], "body": [{"type": "para", "indent": 4, "text": ["The number of frames to roll forward for the quasi-static simulation."], "extent": [12163, 12239]}], "container": true, "attrs": {"id": "quasistaticframes"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Clear Dynamics"], "extent": [12239, 12255], "body": [{"type": "para", "indent": 4, "text": ["All dynamic forces and states, such as velocities, are removed from\n    the output.   This allows the output of a clean state to start\n    a new simulation from, such as when completing a drape."], "extent": [12278, 12478]}], "container": true, "attrs": {"id": "zerodynamics"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [12478, 12493], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Target"], "extent": [12493, 12502], "body": [{"type": "para", "indent": 4, "text": ["Points on the simulation mesh can be marked as ", {"type": "ui", "text": ["Pin to Target"]}, " to follow the targeted animation.   By default, this target is the first input.  But in some cases the animation you wish to target may be present in another SOP node, so that can be specified here."], "extent": [12525, 12794]}], "container": true, "attrs": {"id": "targetmethod"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Target Path"], "extent": [12794, 12807], "body": [{"type": "para", "indent": 4, "text": ["The path of a node to refer to when simulation points are set to the\n    target animation.  Should have a one-to-one point correspondence\n    with the simulation points, either by point number or ", {"type": "code", "text": ["id"]}, "."], "extent": [12828, 13035]}], "container": true, "attrs": {"id": "targetpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Integration"], "extent": [13035, 13048], "body": [{"type": "para", "indent": 4, "text": ["When integrating points forward by their velocities, curved motions\n    like swinging pendulums will be mispredicted and be damped by\n    the constraint projections.   A second order predictor recovers more of\n    this curved motion and maintains more energy in the system."], "extent": [13070, 13349]}, {"type": "para", "indent": 4, "text": ["In any case, if collisions are detected the system will fall back\n    to first order to avoid excessive bouncing."], "extent": [13349, 13468]}], "container": true, "attrs": {"id": "integration"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Default Thickness"], "extent": [13468, 13487], "body": [{"type": "para", "indent": 4, "text": ["If the incoming simulation or collision geometry has no ", {"type": "code", "text": ["pscale"]}, " attribute, it will be set to this value."], "extent": [13507, 13618]}, {"type": "para", "indent": 4, "text": ["For simulation geometry, usually thickness should already be set by the ", {"scheme": "Node", "value": "/nodes/sop/vellumconstraints", "type": "link", "text": ["Vellum Constraints"], "fullpath": "/nodes/sop/vellumconstraints.html"}, " SOP. For collision geometry, creating a ", {"type": "code", "text": ["pscale"]}, " point attribute manually will override this thickness value."], "extent": [13618, 13853]}], "container": true, "attrs": {"id": "thickness"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Secondary Constraint Pass"], "extent": [13853, 13887], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Secondary Constraint Pass"], "extent": [13887, 13922], "body": [{"type": "para", "indent": 4, "text": ["If this checkbox is turned on, all constraints in the specified ", {"type": "ui", "text": ["Constraint Group"]}, " will be solved in a separate, interleaved pass to the remaining constraints.  "], "extent": [13944, 14117]}, {"type": "para", "indent": 4, "text": ["There are two main uses for this option. First, there are some expensive constraint types that do not need to be solved as frequently as the rest of the constraints, so enabling this option and choosing a low ", {"type": "ui", "text": ["Solve Frequency"]}, " can improve performance.  For example, cloth bend constraints on high resolution cloth with low bend stiffness such a silk or cotton. You need to ensure that you're solving distance constraints every pass so the cloth doesn\u2019t stretch. However, bend constraints are expensive and don\u2019t need to be as strong, since silk and cotton have very low bend resistance and wrinkle easily. Solving the bend constraints as a secondary pass will give you strong performance gains. However, this method isn\u2019t practical for stiffer material such as leather."], "extent": [14117, 14894]}, {"type": "para", "indent": 4, "text": ["The second use case is constraints that cause frequent changes in the constraint topology,\n    which causes the solver to re-order the constraint solve, possibly causing jittering in the\n    remaining constraints.  An example is organic tissue represented by tetrahedra and attached\n    together with sliding Stitch constraints.  As the sliding causes changes in the constraint\n    topology the tetrahedra might jitter slightly as the constraint solve order changes.  Moving\n    the Stitch constraints to another pass by setting ", {"type": "ui", "text": ["Constraint Group"]}, " to ", {"type": "code", "text": ["@type=ptprim"]}, " and\n    increasing the ", {"type": "ui", "text": ["Solve Frequency"]}, " to 1 will retain the same stiffness but eliminate tetrahedral\n    jittering due to changes in the solve order."], "extent": [14894, 15621]}], "container": true, "attrs": {"id": "dosecondary"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Constraint Group"], "extent": [15621, 15639], "body": [{"type": "para", "indent": 4, "text": ["The constraint group(s) that should be solved in the interleaved secondary pass.  This parameter accepts standard group syntax, so can contain explicit group names and ad-hoc groups, often specifying one or more constraint types with something like ", {"type": "code", "text": ["@type==bend"]}, ". Any constraint not contained in these groups will be solved in the primary pass as usual."], "extent": [15664, 16023]}], "container": true, "attrs": {"id": "secondarygroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Solve Frequency"], "extent": [16023, 16040], "body": [{"type": "para", "indent": 4, "text": ["The frequency at which to solve the secondary pass.  A setting of 1 will solve the secondary pass as often as the primary pass, while a setting of 0.25 will solve once every four passes of the primary pass (one quarter of the time)."], "extent": [16069, 16307]}], "container": true, "attrs": {"id": "secondaryfrequency"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Multi-Pass Solve"], "extent": [16307, 16332], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Multi-Pass"], "extent": [16332, 16352], "body": [{"type": "para", "indent": 4, "text": ["The multi-pass options allow a substep to be repeated until certain\n    conditions are met.  The current conditions are designed to fix\n    issues that are caused by disabled points causing geometry to be\n    caught and cause the undisabled points to generate stretching.  Since\n    collisions always pre-empt constraints, the result is cloth or\n    hair stretching.  Points adjacent to auto-disabled points will\n    be themselves disabled if too much stretching is detected.  The\n    solve step will then be repeated in the hopes this frees up the\n    geometry."], "extent": [16374, 16942]}], "container": true, "attrs": {"id": "domultipass"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Passes"], "extent": [16942, 16958], "body": [{"type": "para", "indent": 4, "text": ["The maximum number of times to repeat the substep.  If no new\n    points need to be disabled, the process will stop immediately."], "extent": [16981, 17115]}], "container": true, "attrs": {"id": "maxmultipass"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Disable Stretch Ratio"], "extent": [17115, 17138], "body": [{"type": "para", "indent": 4, "text": ["The amount of stretch at the end of a solve step that will trigger\n    points to be eligible for disabling.  This is to detect when failed\n    collisions are pulling the Vellum object apart. By failing additional\n    points the object usually can be released and result in a better\n    result than continuing to stretch."], "extent": [17168, 17494]}], "container": true, "attrs": {"id": "disablestretchratio"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Motion"], "extent": [17494, 17509], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Max Acceleration"], "extent": [17509, 17528], "body": [{"type": "para", "indent": 4, "text": ["Various acceleration limiting options can be used to prevent the\n    simulation from being over-eager to obey non-realistic forces.   These\n    can otherwise result in large energy spikes."], "extent": [17547, 17741]}], "container": true, "attrs": {"id": "maxaccel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Fallback to First Order Integration on Collision"], "extent": [17741, 17791], "body": [{"type": "para", "indent": 4, "text": ["If ", {"type": "ui", "text": ["Max Acceleration"]}, " is exceeded for a point, assume it signals a sharp,\n    discontinuous collision where the second order prediction will be wrong\n    and add erroneous motion, often in the form of bouncing.  In this case,\n    fallback to first order integration for the affected point."], "extent": [17815, 18112]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [18112, 18122], "body": [{"type": "para", "indent": 8, "text": ["Grain and Fluid particles are always considered for fallback to first order,\n        not only in the case of collisions.  While this control is helpful to calm down\n        simulations and avoid stray particles, it can decrease overall splashiness\n        of grain and fluid motion. Increasing ", {"type": "ui", "text": ["Max Acceleration"]}, " can restore\n        that splashiness."], "extent": [18122, 18485]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "accelfallback"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Limit Acceleration in Velocity Update"], "extent": [18485, 18524], "body": [{"type": "para", "indent": 4, "text": ["Cap the amount that velocity of a particle is allowed to change as a\n    result of any of the dynamics.   This is useful to prevent some\n    instant motion being mis-identified as a massive force, and thus\n    avoid fly-away particles."], "extent": [18545, 18786]}], "container": true, "attrs": {"id": "limitaccel"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Limit Displacement on Collision"], "extent": [18786, 18819], "body": [{"type": "para", "indent": 4, "text": ["During the collision resolution, if the collision correction moves a\n    particle more than the acceleration amount, cap the effect.  The hope\n    is to fail more gracefully when a part of a model snags on the cloth\n    and is pulling it in a surprising fashion."], "extent": [18843, 19111]}], "container": true, "attrs": {"id": "limitdisplace"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Disable Broken Welds"], "extent": [19111, 19133], "body": [{"type": "para", "indent": 4, "text": ["When a weld breaks, the two new points start off next to each other.\n    If the surfaces do not separate naturally due to whatever triggered\n    the break, they may trigger collision detection and be pushed out,\n    causing an explosive motion when breaking occurs.  This option\n    sets the ", {"type": "code", "text": ["disableself"]}, " attribute when points are de-welded to avoid\n    these self collisions.  Note that this may cause layered cloth to\n    self penetrate, however."], "extent": [19162, 19617]}], "container": true, "attrs": {"id": "disablebrokenwelds"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Normalize Stress"], "extent": [19617, 19635], "body": [{"type": "para", "indent": 4, "text": ["Normalize the stress computation over time, so that the computed values\n    are more predictable as the ", {"type": "ui", "text": ["Substeps"]}, " parameter changes."], "extent": [19661, 19802]}], "container": true, "attrs": {"id": "normalizestress"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sliding Method"], "extent": [19802, 19818], "body": [{"type": "para", "indent": 4, "text": ["The method used for finding the next closest position on the target geometry\n    when sliding ", {"type": "ui", "text": ["Attach to Geometry"]}, " or ", {"type": "ui", "text": ["Stitch Points"]}, " constraints.\n    ", {"type": "ui", "text": ["Closest Point"]}, " simply chooses the closest point on the target geometry to\n    the projected sliding position.  This approach is fast but can improperly jump\n    across concavities in the target geometry.  ", {"type": "ui", "text": ["Traverse Polygons"]}, " starts from\n    the current target primitive and successively walks outwards, finding the closest\n    point on the surrounding primitives.  This approach is more expensive but handles\n    concave target geometry better.  ", {"type": "ui", "text": ["Traverse Triangles (Optimized)"]}, " is similar to\n    the previous option in its improved handling of concavities, but can be many times faster\n    as it uses specialized triangle distance functions.  However, it can only be used with\n    target geometry consisting of triangles."], "extent": [19842, 20733]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 4, "role": "item", "extent": [20733, 20742], "body": [{"type": "para", "indent": 8, "text": ["Target geometry with quadrilaterals can be triangulated with the ", {"scheme": "Node", "value": "/nodes/sop/divide", "type": "link", "text": ["Divide"], "fullpath": "/nodes/sop/divide.html"}, " SOP."], "extent": [20742, 20846]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "slidingmethod"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Sleeping"], "extent": [20846, 20863], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Enable Auto Sleep"], "extent": [20863, 20883], "body": [{"type": "para", "indent": 4, "text": ["Particles that remain near-stationary for sufficient time will be\n    put to sleep by setting their ", {"type": "code", "text": ["stopped"]}, " attribute to ", {"type": "code", "text": ["1"]}, "."], "extent": [20905, 21038]}, {"type": "para", "indent": 4, "text": ["You can use the Pinned visualization to visualize which points are\n    sleeping."], "extent": [21038, 21124]}], "container": true, "attrs": {"id": "doautosleep"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Velocity Threshold"], "extent": [21124, 21144], "body": [{"type": "para", "indent": 4, "text": ["How slowly particles need to be moving before they are eligible\n    for sleeping.  The amount of time they remain below this speed\n    is accumulated in the ", {"type": "code", "text": ["deactivation_time"]}, " attribute.  If they\n    exceed this speed, the ", {"type": "code", "text": ["deactivation_time"]}, " is reset to zero."], "extent": [21177, 21444]}], "container": true, "attrs": {"id": "sleep_velocitythreshold"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sleep Delay"], "extent": [21444, 21457], "body": [{"type": "para", "indent": 4, "text": ["How many seconds particles need to remain at or below the\n    velocity threshold before they are put to sleep.  See the\n    ", {"scheme": "Node", "value": "/nodes/dop/popawaken", "type": "link", "text": ["POP Awaken"], "fullpath": "/nodes/dop/popawaken.html"}, " DOP for methods to wake the\n    particles back up again."], "extent": [21478, 21696]}], "container": true, "attrs": {"id": "sleep_delay"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Grain Collisions"], "extent": [21696, 21721], "body": [{"type": "para", "indent": 0, "text": ["Vellum grains use a separate collision pass to deal with collisions\nbetween the grains.  These parameters control that behavior.  They\nare similar to those on ", {"scheme": "Node", "value": "/nodes/dop/popgrains", "type": "link", "text": ["POP Grains"], "fullpath": "/nodes/dop/popgrains.html"}], "extent": [21721, 21914]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Search Scale"], "extent": [16, 30], "body": [{"type": "para", "indent": 4, "text": ["Potential intersection particles are any within this scaled distance\n    of the average of the two particles ", {"type": "code", "text": ["pscale"]}, " attribute.  This\n    is an overestimate because usually collisions are not updated\n    during the constraint iterations, so it needs to record not\n    just the currently colliding particles, but those that may\n    start to collide due to the earlier iterations."], "extent": [58, 443]}, {"type": "para", "indent": 4, "text": ["This also effects the range of the attraction force in clumping."], "extent": [443, 513]}], "container": true, "attrs": {"id": "grain_searchscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Neighbors"], "extent": [513, 528], "body": [{"type": "para", "indent": 4, "text": ["The maximum number of particles that will be considered when searching for potential collisions over the substep. Capping this is useful to avoid excessive computations, if too many particles are created at one spot.  This parameter is ignored if ", {"type": "ui", "text": ["OpenCL Neighbor Search"]}, " is enabled, in which\n    case all neighbors are considered within the radius determined by ", {"type": "ui", "text": ["Search Scale"]}, "."], "extent": [556, 944]}], "container": true, "attrs": {"id": "grain_maxneighbor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Assume Uniform Radius"], "extent": [1338, 1361], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["pscale"]}, " attribute is used to determine the radius of each\n    particle.  If all particles have the same radius, faster acceleration\n    structures can be used to find neighbors."], "extent": [1391, 1579]}], "container": true, "attrs": {"id": "grain_uniformradius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ignore Neighbors with Same Name or Piece"], "extent": [1579, 1621], "body": [{"type": "para", "indent": 4, "text": ["Ignore any neighbors that have the same non-empty ", {"type": "code", "text": ["name"]}, " or non-negative ", {"type": "code", "text": ["piece"]}, " point attribute.\n    This option can be enabled to create separate clusters of grains that only interact\n    with other clusters, often in conjunction with a ", {"type": "ui", "text": ["Shape Match"]}, " constraint to give\n    rigid behavior."], "extent": [1643, 1942]}], "container": true, "attrs": {"id": "ignorepiece"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Repulsion Weight"], "extent": [2308, 2326], "body": [{"type": "para", "indent": 4, "text": ["A weighting for how much the particle collision forces are weighted.\n    A value of zero will disable particle collision."], "extent": [2352, 2479]}, {"type": "para", "indent": 4, "text": ["Scale with the ", {"type": "code", "text": ["repulsionweight"]}, " point attribute."], "extent": [2479, 2534]}], "container": true, "attrs": {"id": "repulsionweight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attraction Weight"], "extent": [2670, 2689], "body": [{"type": "para", "indent": 4, "text": ["A weighting for how much the particles will naturally stick together\n    when close.  A value of zero will disable particle clumping."], "extent": [2716, 2855]}, {"type": "para", "indent": 4, "text": ["Scale with the ", {"type": "code", "text": ["attractionweight"]}, " point attribute."], "extent": [2855, 2911]}], "container": true, "attrs": {"id": "attractionweight"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Fluids"], "extent": [22310, 22325], "body": [{"type": "para", "indent": 0, "text": ["Vellum fluids use a density constraint to keep fluids incompressible, as well\nas provide viscosity and surface tension.  Any particle with a non-zero ", {"type": "code", "text": ["phase"]}, "\nattribute is treated as fluid."], "extent": [22325, 22516]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Kernel Radius Scale"], "extent": [3885, 3906], "body": [{"type": "para", "indent": 4, "text": ["The radius of the kernel used for fluid calculations.  In general the default value\n    of 4 is recommended, but it can be increased or reduced slightly for different effects.\n    In particular this value can effect the size of the drops created by surface tension, with\n    larger values creating larger drops and fewer individual particles. Note that larger values\n    will result in slower simulation and more memory usage for neighbor lists.  Also values\n    much below 3 or above 5 can lead to instability."], "extent": [3934, 4451]}], "container": true, "attrs": {"id": "fluid_searchscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Viscosity"], "extent": [4451, 4462], "body": [{"type": "para", "indent": 4, "text": ["The viscosity of the fluid.  Low values for viscosity help keep the simulation stable,\n    while higher values can simulate liquids like honey.  A per-particle ", {"type": "code", "text": ["viscosity"]}, " attribute\n    can be used to multiply this value for variable viscosity.  Fluid particles will different\n    ", {"type": "code", "text": ["phase"]}, " values will be solved independently for viscosity, allowing multi-phase fluid\n    behavior."], "extent": [4482, 4868]}], "container": true, "attrs": {"id": "viscosity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Collision Viscosity"], "extent": [4868, 4889], "body": [{"type": "para", "indent": 4, "text": ["The viscosity of the fluid in contact with an SDF collision. This value is only\n    used when the solver has a ground plane or a collision object created with the\n    ", {"scheme": "Node", "value": "/nodes/sop/vdbcollider", "type": "link", "text": ["VDB Collider"], "fullpath": "/nodes/sop/vdbcollider.html"}, " SOP."], "extent": [4918, 5131]}], "container": true, "attrs": {"id": "collisionviscosity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Viscosity Solver"], "extent": [5131, 5149], "body": [{"type": "para", "indent": 4, "text": ["The type of viscosity solve to perform.  ", {"type": "ui", "text": ["Explicit"]}, " is fast but can be unstable for high particle\n    counts, high viscosity, or low substeps.  ", {"type": "ui", "text": ["Implicit"]}, " is slower but remains stable even for higher\n    particle counts and viscosity values."], "extent": [5175, 5426]}], "container": true, "attrs": {"id": "viscositysolver"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Viscosity Tolerance"], "extent": [5426, 5447], "body": [{"type": "para", "indent": 4, "text": ["The tolerance for the viscosity solve when using the ", {"type": "ui", "text": ["Implicit"]}, " solve.  Lower values are more accurate \n    at the cost of more iterations."], "extent": [5461, 5608]}], "container": true, "attrs": {"id": "tol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Viscosity Iterations"], "extent": [5608, 5634], "body": [{"type": "para", "indent": 4, "text": ["The maximum number of iterations for the ", {"type": "ui", "text": ["Implicit"]}, " viscosity solve."], "extent": [5667, 5743]}], "container": true, "attrs": {"id": "maxviscosityiterations"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Surface Tension"], "extent": [5743, 5760], "body": [{"type": "para", "indent": 4, "text": ["The surface tension of the fluid.  Higher values for this setting reduce the curvature of the fluid\n    and cause it to form blobs.  A per-particle ", {"type": "code", "text": ["surfacetension"]}, " attribute\n    can be used to multiply this value for variable surface tension.  Fluid particles will different\n    ", {"type": "code", "text": ["phase"]}, " values will be solved independently for surface tension, allowing multi-phase fluid\n    behavior."], "extent": [5785, 6176]}], "container": true, "attrs": {"id": "surfacetension"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Adhesion"], "extent": [6176, 6186], "body": [{"type": "para", "indent": 4, "text": ["The adhesion of the fluid.  Higher values for this setting cause the fluid to stick to the\n    normal surface of collisions, without any friction effects. You can increase ", {"type": "ui", "text": ["Collision Viscosity"]}, "\n    to have collisions' velocity affect the fluid in a friction-like way. A per-particle ", {"type": "code", "text": ["adhesion"]}, "\n    attribute can be used to multiply this value for variable adhesion.  Fluid particles\n    will different ", {"type": "code", "text": ["phase"]}, " values will be solved independently for adhesion, allowing multi-phase\n    fluid behavior. "], "extent": [6205, 6718]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [6718, 6728], "body": [{"type": "para", "indent": 8, "text": ["This value is only used when the solver has a ground plane or a collision object\n        created with the ", {"scheme": "Node", "value": "/nodes/sop/vdbcollider", "type": "link", "text": ["VDB Collider"], "fullpath": "/nodes/sop/vdbcollider.html"}, " SOP.  The ", {"type": "ui", "text": ["Sticky"]}, " parameter of that node\n        scales the ", {"type": "ui", "text": ["Adhesion"]}, " value, so should generally be set to 1 get adhesion effects."], "extent": [6728, 7022]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "adhesion"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spatial Sort Interval"], "extent": [7022, 7045], "body": [{"type": "para", "indent": 4, "text": ["Vellum fluids and grains perform many calculations involving nearby points.  Generally performance\n    is greatly improved by ensuring that points that are near other in 3D space are also near each other in\n    memory.  This option enables a spatial sort of the particles at the specified interval of frames."], "extent": [7067, 7385]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [7385, 7395], "body": [{"type": "para", "indent": 8, "text": ["This sort will change the point numbers of the particles, so it can be useful to add an ", {"type": "code", "text": ["id"]}, " attribute before simulation."], "extent": [7395, 7526]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "sortinterval"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["OpenCL"], "extent": [23086, 23101], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["OpenCL Graph Coloring"], "extent": [23101, 23125], "body": [{"type": "para", "indent": 4, "text": ["When doing graph coloring, a fast parallel OpenCL algorithm is used.\n    Unfortunately it may require 10\u00d7 more memory than the rest of the\n    solve on tetrahedral meshes.  Thus, systems that might fit in memory\n    for solving will not succeed the color pass.  Disabling this forces\n    all graph coloring to be done in a slower sequential manner, preserving\n    RAM for the actual solve."], "extent": [23149, 23544]}], "container": true, "attrs": {"id": "oclgraphcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["OpenCL Neighbor Search"], "extent": [23544, 23568], "body": [{"type": "para", "indent": 4, "text": ["Perform any neighbor searches for grains and fluids using OpenCL, which\n    is faster than the CPU but can use a bit more GPU memory."], "extent": [23596, 23735]}], "container": true, "attrs": {"id": "oclneighborsearch"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualize"], "extent": [23735, 23751], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Show Collision"], "extent": [23751, 23768], "body": [{"type": "para", "indent": 4, "text": ["Show the collision object as a blue wireframe."], "extent": [23792, 23845]}], "container": true, "attrs": {"id": "showcollision"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Show Guide Geometry"], "extent": [23845, 23866], "body": [{"type": "para", "indent": 4, "text": ["Show additional guide geometry from the solver."], "extent": [23886, 23939]}], "container": true, "attrs": {"id": "showguide"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Geometry"], "extent": [16, 33], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Thickness"], "extent": [33, 45], "body": [{"type": "para", "indent": 4, "text": ["Draw spheres for the ", {"type": "code", "text": ["pscale"]}, " of the geometry.   If the geometry has already\n    solved it may have set the ", {"type": "code", "text": ["overlap_self"]}, " attribute, if so, the actual\n    effective thickness is drawn in cyan.  This is useful to detect if\n    the original thickness was too high - if so the extra thickness will\n    be ignored by the simulation and just slow down the collisions."], "extent": [76, 445]}], "container": true, "attrs": {"id": "guide_thicknesscolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extrude"], "extent": [445, 454], "body": [{"type": "para", "indent": 4, "text": ["Draw the thickness by offsetting the geometry in opposite directions rather\n    than by using spheres."], "extent": [491, 599]}], "container": true, "attrs": {"id": "guide_showthicknessextrude"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Failed Self Collision"], "extent": [599, 622], "body": [{"type": "para", "indent": 4, "text": ["Draw failed self collisions as red spheres.  These points will no\n    longer collide with their own geometry, nor will any edge or triangle\n    attached to them."], "extent": [649, 817]}], "container": true, "attrs": {"id": "guide_failedself"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Failed External Collision"], "extent": [817, 844], "body": [{"type": "para", "indent": 4, "text": ["Draw failed external collisions as orange spheres.  These points will\n    no longer collide with external geometry, nor will any edge or triangle\n    attached to them."], "extent": [875, 1048]}], "container": true, "attrs": {"id": "guide_failedexternal"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Welds"], "extent": [1048, 1055], "body": [{"type": "para", "indent": 4, "text": ["Draw which points have been semantically fused together with the\n    ", {"type": "code", "text": ["weld"]}, " attribute.  These can be broken during the solve using\n    the auto break options, or by setting ", {"type": "code", "text": ["weld"]}, " to -1."], "extent": [1081, 1273]}], "container": true, "attrs": {"id": "guide_weldcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Radius Scale"], "extent": [1273, 1287], "body": [{"type": "para", "indent": 4, "text": ["Because the thickness may be small, the visualization spheres can sometimes\n    be lost.  This scales the visualization spheres allowing them to\n    be readily seen."], "extent": [1315, 1487]}], "container": true, "attrs": {"id": "guide_colvisscale"}, "role": "item"}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Constraints"], "extent": [1487, 1507], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [1507, 1515], "body": [{"type": "para", "indent": 4, "text": ["Constraints are often added to different groups.  This allows you to\n    isolate one particular group to visualize."], "extent": [1547, 1669]}], "container": true, "attrs": {"id": "guide_constraintgroup"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Pin to Target"], "extent": [1669, 1684], "body": [{"type": "para", "indent": 4, "text": ["Draw spheres over points pinned to the target animation."], "extent": [1709, 1771]}], "container": true, "attrs": {"id": "guide_pincolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Stitch Points"], "extent": [1771, 1786], "body": [{"type": "para", "indent": 4, "text": ["Draw stitch constraints of points stitched together."], "extent": [1814, 1872]}], "container": true, "attrs": {"id": "guide_stitchcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Attach to Geometry"], "extent": [1872, 1892], "body": [{"type": "para", "indent": 4, "text": ["Draw attachment constraints for points attached to external geometry."], "extent": [1920, 1995]}], "container": true, "attrs": {"id": "guide_attachcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Radius"], "extent": [1995, 2003], "body": [{"type": "para", "indent": 4, "text": ["The constraint guides are not scaled by the thickness of the object,\n    so this provides an absolute scale for their size."], "extent": [2039, 2169]}], "container": true, "attrs": {"id": "guide_constraintvisradius"}, "role": "item"}], "container": true}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [2169, 2191], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["False Color Mode"], "extent": [2191, 2210], "body": [{"type": "para", "indent": 4, "text": ["Visualize properties of the constraints using a blue-to-red infrared coloring."], "extent": [2229, 2313]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["None"], "extent": [2313, 2323], "body": [{"type": "para", "indent": 8, "text": ["Leave the original colors."], "extent": [2323, 2359]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Stress"], "extent": [2359, 2379], "body": [{"type": "para", "indent": 8, "text": ["Color according to the maximum stretching force applied by the constraints."], "extent": [2379, 2464]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Stress"], "extent": [2464, 2481], "body": [{"type": "para", "indent": 8, "text": ["Color according to the maximum bending force applied by the constraints."], "extent": [2481, 2563]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Distance"], "extent": [2563, 2585], "body": [{"type": "para", "indent": 8, "text": ["Color according to how far constraints are stretched."], "extent": [2585, 2648]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Ratio"], "extent": [2648, 2667], "body": [{"type": "para", "indent": 8, "text": ["Color according the ratio between original and current stretch."], "extent": [2667, 2740]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Angle"], "extent": [2740, 2756], "body": [{"type": "para", "indent": 8, "text": ["Color according to how many degrees the bend angle has deviated."], "extent": [2756, 2830]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Stretch Plastic Flow"], "extent": [2830, 2856], "body": [{"type": "para", "indent": 8, "text": ["Color according to how much the stretch plastic flow has been triggered."], "extent": [2856, 2938]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Bend Plastic Flow"], "extent": [2938, 2961], "body": [{"type": "para", "indent": 8, "text": ["Color according to how much the bend plastic flow has been triggered."], "extent": [2961, 3040]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Volume Stress"], "extent": [3040, 3059], "body": [{"type": "para", "indent": 8, "text": ["Color according to the maximum volumetric force applied by the constraints."], "extent": [3059, 3144]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Volume Distance"], "extent": [3144, 3165], "body": [{"type": "para", "indent": 8, "text": ["Color according to how far volumetric constraints have expanded from their rest state."], "extent": [3165, 3261]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Volume Ratio"], "extent": [3261, 3279], "body": [{"type": "para", "indent": 8, "text": ["Color according the ratio between volumetric expansion and the rest state."], "extent": [3279, 3364]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "vis_mode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Display Visualization Geometry"], "extent": [3364, 3396], "body": [{"type": "para", "indent": 4, "text": ["Toggles if the simulation geometry is false-colored in addition to the constraints."], "extent": [3421, 3511]}], "container": true, "attrs": {"id": "vis_displaygeo"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Stretch Stress"], "extent": [3511, 3531], "body": [{"type": "para", "indent": 4, "text": ["Scales the maximum stretch stress to be the maximum coloration."], "extent": [3562, 3632]}], "container": true, "attrs": {"id": "vis_maxstretchstress"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Bend Stress"], "extent": [3632, 3649], "body": [{"type": "para", "indent": 4, "text": ["Scales the maximum bend stress to be the maximum coloration."], "extent": [3677, 3743]}], "container": true, "attrs": {"id": "vis_maxbendstress"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Stretch Distance"], "extent": [3743, 3765], "body": [{"type": "para", "indent": 4, "text": ["Sets the maximum stretch distance to be the maximum coloration."], "extent": [3798, 3867]}], "container": true, "attrs": {"id": "vis_maxstretchdistance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Stretch Ratio"], "extent": [3867, 3886], "body": [{"type": "para", "indent": 4, "text": ["Sets the maximum stretch ratio to be the maximum coloration."], "extent": [3916, 3982]}], "container": true, "attrs": {"id": "vis_maxstretchratio"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Bend Angle"], "extent": [3982, 3998], "body": [{"type": "para", "indent": 4, "text": ["Sets the maximum bend angle to be the maximum coloration."], "extent": [4025, 4088]}], "container": true, "attrs": {"id": "vis_maxbendangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Stretch Plastic Flow"], "extent": [4088, 4114], "body": [{"type": "para", "indent": 4, "text": ["Sets the maximum stretch plastic flow to be the maximum coloration."], "extent": [4150, 4223]}], "container": true, "attrs": {"id": "vis_maxstretchplasticflow"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Bend Plastic Flow"], "extent": [4223, 4246], "body": [{"type": "para", "indent": 4, "text": ["Sets the maximum bend plastic flow to be the maximum coloration."], "extent": [4279, 4349]}], "container": true, "attrs": {"id": "vis_maxbendplasticflow"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Volume Stress"], "extent": [4349, 4368], "body": [{"type": "para", "indent": 4, "text": ["Scales the maximum volume stress to be the maximum coloration."], "extent": [4398, 4466]}], "container": true, "attrs": {"id": "vis_maxvolumestress"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Volume Distance"], "extent": [4466, 4487], "body": [{"type": "para", "indent": 4, "text": ["Scales the maximum volume distance to be the maximum coloration."], "extent": [4519, 4589]}], "container": true, "attrs": {"id": "vis_maxvolumedistance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Volume Ratio"], "extent": [4589, 4607], "body": [{"type": "para", "indent": 4, "text": ["Scales the maximum volume ratio to be the maximum coloration."], "extent": [4636, 4702]}], "container": true, "attrs": {"id": "vis_maxvolumeratio"}, "role": "item"}], "container": true}]}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [23977, 23986], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumdrape", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumdrape.html"}], "extent": [23986, 24015]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumconstraints", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumconstraints.html"}], "extent": [24015, 24050]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumconstraints_grain", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumconstraints_grain.html"}], "extent": [24050, 24091]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/vellumio", "type": "link", "text": "", "fullpath": "/nodes/sop/vellumio.html"}], "extent": [24091, 24117]}], "container": true}], "text": "Related"}], "title": ["Vellum Solver"], "summary": ["Runs a dynamic Vellum simulation."], "included": ["/nodes/dop/popCommonParms", "/nodes/dop/popattribblur", "/nodes/dop/popmaskfromshadow", "/nodes/dop/popwindshadow", "/nodes/dop/standard_fluid_grains_parms", "/nodes/dop/standard_pop_parms", "/nodes/sop/_vellum_common", "/nodes/sop/attribblur"]}