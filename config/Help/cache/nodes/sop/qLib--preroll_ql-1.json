{"type": "root", "attrs": {"icon": "CHOP/extractlocomotion", "context": "sop", "type": "node", "internal": "preroll_ql", "version": "1", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Pre-Roll qL"], "extent": [57, 73]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["version 1"]}, " (experimental)"], "extent": [73, 102]}, {"type": "summary", "indent": 0, "text": ["Provides simple pre- and post-roll animation for the input geometry."], "extent": [102, 178]}, {"level": 1, "id": "description", "container": true, "type": "description_section", "indent": 0, "role": "section", "extent": [178, 191], "body": [{"type": "para", "indent": 4, "text": ["This node uses an approximate overall transformation (translation and rotation)\n    of the input geometry to linearly extrapolate it outside its regular animation range."], "extent": [191, 370]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [370, 380], "body": [{"type": "para", "indent": 8, "text": ["The idea is to have an option to generate ", {"type": "em", "text": ["some sort of motion"]}, " relatively easily, that\n        can be used as preroll for secondary simulations (i.e. cloth, smoke, etc).\n        High quality character prerolls supposed to come from motion departments."], "extent": [380, 642]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 4, "text": ["Since it uses simple linear extrapolation, it works best when the motion near the\n    start/end frames has roughly constant speed (as opposed to accelerating or decelerating)."], "extent": [642, 823]}, {"type": "para", "indent": 4, "text": ["Works best for rigidly transforming geometry. For deforming geometry (e.g. characters)\n    a subset of the geometry can be passed on in the second input. That allows to specify\n    more ", {"type": "q", "text": ["rigid"]}, " parts of the geometry where better transformations could be extracted from\n    (e.g. a torso section)."], "extent": [823, 1129]}, {"type": "para", "indent": 4, "text": ["The node can work with whatever geometry the underlying ", {"scheme": "Node", "value": "/nodes/sop/extracttransform", "type": "link", "text": ["Extract Transform SOP"], "fullpath": "/nodes/sop/extracttransform.html"}, "\n    node supports (regular geometry and packeds). Similarly, partitioning by ", {"type": "code", "text": ["name"]}, "\n    attribute is also supported (so, multiple characters or packed/RBD objects can also be\n    extrapolated)."], "extent": [1129, 1435]}], "text": "Description"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [1435, 1443], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Input Geometry"], "extent": [1443, 1463], "body": [{"type": "para", "indent": 8, "text": ["The geometry to apply pre/post-roll transformations to."], "extent": [1463, 1528]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Centroid Geometry"], "extent": [1528, 1551], "body": [{"type": "para", "indent": 8, "text": ["An optional sub-set of the Input Geometry, to be used for determining the actual\n        transformations. For example it could be useful to pass only a part of an entire\n        character (e.g. torso section) to get better results."], "extent": [1551, 1800]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [1800, 1814], "body": [{"type": "para", "indent": 12, "text": ["When using per-piece prerolls, make sure each piece should be represented\n            by geometry on this input as well."], "extent": [1814, 1960]}], "container": true}], "container": true, "role": "item_group"}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [1960, 1973], "body": [{"type": "para", "indent": 12, "text": ["Apart from possible ", {"type": "code", "text": ["name"]}, " attributes, there\u2019s no other restriction on the\n            geometry \u2013 it is even possible to use parts of a low res version\n            of a character as centroid for example\n            (given that it has the same motion as the high res)."], "extent": [1973, 2256]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2256, 2268], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Frame Range"], "extent": [2268, 2285], "body": [{"type": "para", "indent": 8, "text": ["The actual animation range of the incoming geometry.\n        Frames before the start frame are considered preroll, frames after the end\n        are considered as post-roll."], "extent": [2285, 2467]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Pre/Post-Roll Range"], "extent": [2467, 2492], "body": [{"type": "para", "indent": 8, "text": ["An (optional) extended frame range, limiting where the pre/post-roll would take place."], "extent": [2492, 2596]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Offset Frame"], "extent": [2596, 2614], "body": [{"type": "para", "indent": 8, "text": ["Extrapolation is done by taking the first frame (or last frame, for post-roll),\n        and another frame from within the actual animation range.\n        The offset frame determines this frame, relative to the start (or end) frame."], "extent": [2614, 2855]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Translation %"], "extent": [2855, 2874], "body": [{"type": "para", "indent": 8, "text": ["The amount of the extrapolated translation to be applied for the pre/post-roll range."], "extent": [2874, 2977]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [2977, 2990], "body": [{"type": "para", "indent": 12, "text": ["Try to tweak ", {"type": "em", "text": ["Offset Frame"]}, " parameter first if there\u2019s too much speed difference\n            between the extrapolated and the animated motion."], "extent": [2990, 3154]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Orientation %"], "extent": [3154, 3173], "body": [{"type": "para", "indent": 8, "text": ["How much of the rotational component should be applied for the pre/post-roll range."], "extent": [3173, 3274]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [3274, 3288], "body": [{"type": "para", "indent": 12, "text": ["Orientation extrapolation can ", {"type": "q", "text": ["spin out of control"]}, " (hence the default of ", {"type": "code", "text": ["0.5"]}, ")."], "extent": [3288, 3395]}, {"type": "para", "indent": 12, "text": ["For rigid geometry, higher values can give more accurate results. For heavily\n            deforming geometry (e.g. characters) this might need to be toned down even lower."], "extent": [3395, 3588]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Per-Piece Extrapolation"], "extent": [3588, 3617], "body": [{"type": "para", "indent": 8, "text": ["Allows specifying independently moving geometry pieces using a ", {"type": "code", "text": ["name"]}, " attribute.\n        See the ", {"scheme": "Node", "value": "/nodes/sop/extracttransform", "type": "link", "text": ["Extract Transform SOP help page"], "fullpath": "/nodes/sop/extracttransform.html"}, " for details."], "extent": [3617, 3797]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3797, 3806], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [3806, 3818]}], "container": true}], "text": "Related"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [3818, 3830], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Support geo scaling?"], "extent": [3830, 3857]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Transform Pieces SOP still buggy (e.g. see workaround inside to get back per prim name attribs),\n      should be replaced with something decent"], "extent": [3857, 4007]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Post-roll should also be enabled by default? (+params expanded then!)"], "extent": [4007, 4083]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Add an explanation image about offset frames?"], "extent": [4083, 4135]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [4135, 4148]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [4148, 4172], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [4172, 4200]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2023-09-02"], "extent": [4200, 4212], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added optional pre/post-roll range (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1374", "type": "link", "text": ["#1374"], "exists": true}, ")"], "extent": [4212, 4305]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2022-09-17"], "extent": [4305, 4317], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Doesn\u2019t generate velocity attributes any more in pre/post-roll ranges (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1333", "type": "link", "text": ["#1333"], "exists": true}, ")"], "extent": [4317, 4445]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2019-12-11"], "extent": [4445, 4457], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "em", "text": ["Translation %"]}, " parameter"], "extent": [4457, 4495]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Minot UI tweaks, help page cleanup"], "extent": [4495, 4537]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2019-12-10"], "extent": [4537, 4549], "body": [{"type": "para", "indent": 4, "text": ["First version (prototype)."], "extent": [4549, 4581]}], "container": true}], "container": true}]}], "title": ["Pre-Roll qL"], "summary": ["Provides simple pre- and post-roll animation for the input geometry."]}