{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "pointdeform", "icon": "SOP/pointdeform", "since": "14.0", "tags": "reshape, model, anim", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Point Deform"], "extent": [0, 17]}, {"type": "summary", "indent": 0, "text": ["Deforms geometry according to an arbitrary connected point mesh."], "extent": [132, 205]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [205, 220], "body": [{"type": "para", "indent": 0, "text": ["This node computes how a point cloud (the deformation lattice) deforms (compared to its original ", {"type": "em", "text": ["rest"]}, " point positions), and applies those deformations to the input geometry. The node works by having each point on the lattice ", {"type": "em", "text": ["capture"]}, " and influence nearby points on the model. The closer the points, the more influence (computed using the Elendt metaball formula)."], "extent": [220, 589]}, {"type": "para", "indent": 0, "text": ["This allows you to animate proxy geometry and transfer that to a higher resolution mesh. In that case, the points of the low-resolution proxy would act as the lattice, capturing and deforming the high-resolution geometry."], "extent": [589, 812]}, {"type": "para", "indent": 0, "text": ["The deformation lattice points can be connected by edges. This node uses connected points to find local transforms, allowing for the accurate transformation of rotating models. For rotating meshes, this avoids the collapsed look you might get with the ", {"scheme": "Icon", "value": "/icons/SOP/lattice.svg", "type": "link", "text": "", "fullpath": "/icons/SOP/lattice.svg.html"}, " ", {"scheme": "Node", "value": "/nodes/sop/lattice", "type": "link", "text": ["Lattice SOP"], "fullpath": "/nodes/sop/lattice.html"}, " node\u2019s point mode."], "extent": [812, 1145]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips and notes"], "extent": [1145, 1166], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["This node works for cloth-like or solid-like models. It does ", {"type": "em", "text": ["not"]}, " work for wire models as the transforms can become unstable for that type of mesh."], "extent": [1166, 1319]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The connectivity is ", {"type": "em", "text": ["not"]}, " limited to polygons or two manifold surfaces, making it useful for use with the constraint networks you get out of Bullet or the grain solver."], "extent": [1319, 1491]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you use connected points, then the connectivity should be the same in the rest points and the deformed points. Adding/removing edges or changing connections will confuse the node and produce bad results."], "extent": [1491, 1701]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If an ", {"type": "code", "text": ["id"]}, " attribute is on the rest or deformed points, the node uses it in place of the point numbers to establish correspondence between rest and deformed points, as well as store capture point numbers."], "extent": [1701, 1909]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"scheme": "Icon", "value": "/icons/SOP/bonedeform.svg", "type": "link", "text": "", "fullpath": "/icons/SOP/bonedeform.svg.html"}, " ", {"scheme": "Node", "value": "/nodes/sop/deform", "type": "link", "text": ["Bone Deform SOP"], "fullpath": "/nodes/sop/deform.html"}, ", ", {"scheme": "Icon", "value": "/icons/SOP/clothdeform.svg", "type": "link", "text": "", "fullpath": "/icons/SOP/clothdeform.svg.html"}, " ", {"scheme": "Node", "value": "/nodes/sop/clothdeform", "type": "link", "text": ["Cloth Deform SOP"], "fullpath": "/nodes/sop/clothdeform.html"}, ", and ", {"scheme": "Icon", "value": "/icons/SOP/lattice.svg", "type": "link", "text": "", "fullpath": "/icons/SOP/lattice.svg.html"}, " ", {"scheme": "Node", "value": "/nodes/sop/lattice", "type": "link", "text": ["Lattice SOP"], "fullpath": "/nodes/sop/lattice.html"}, " also capture and deform geometry."], "extent": [1909, 2158]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can use the ", {"scheme": "Node", "value": "/nodes/sop/pointcapture", "type": "link", "text": ["Point Capture SOP"], "fullpath": "/nodes/sop/pointcapture.html"}, " to generate capture weights for this node. If you want to use the ", {"type": "ui", "text": ["Point Capture SOP"]}, " like this, you should set the ", {"type": "ui", "text": ["Mode"]}, " parameter on this node to ", {"type": "em", "text": ["Deform"]}, "."], "extent": [2158, 2382]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["This transforms all attributes marked as transforming, which may\n  slow things down if there are attributes you don\u2019t care about.\n  Setting attributes to transform to blank will transform only\n  positions."], "extent": [2382, 2591]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2591, 2603], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [2603, 2611], "body": [{"type": "para", "indent": 4, "text": ["Specifies which points on the model (input 1) to capture and deform using the lattice. You can use the ", {"scheme": "Icon", "value": "BUTTONS/reselect", "type": "link", "text": "", "fullpath": "/nodes/sop/BUTTONS/reselect.html"}, " arrow select button to the right of this field to interactively select the points in the viewport. If you want to deform ", {"type": "em", "text": ["all points"]}, " on this node\u2019s first input, then leave this field empty. "], "extent": [2626, 2950]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mode"], "extent": [2950, 2956], "body": [{"type": "para", "indent": 4, "text": ["You can use this node to both ", {"type": "em", "text": ["capture points"]}, " and ", {"type": "em", "text": ["deform"]}, ". However, you can use this parameter to have the node only perform one of those operations. There is no speed difference between using one node to do both operations or two nodes to do the two steps separately. The only reason you may want to change this parameter setting is if you have a technical workflow where you want to use the capture information from another node (like the ", {"scheme": "Node", "value": "/nodes/sop/pointcapture", "type": "link", "text": ["Point Capture SOP"], "fullpath": "/nodes/sop/pointcapture.html"}, ") before using this node to perform the deformation."], "extent": [2970, 3512]}, {"type": "note_group", "body": [{"ext": null, "type": "note", "indent": 4, "role": "item", "extent": [3512, 3523], "body": [{"type": "para", "indent": 8, "text": ["If you turn ", {"type": "em", "text": ["off"]}, " ", {"type": "ui", "text": ["Delete Capture Attributes"]}, ", then the capture attributes are included in the output. So you do not need to use separate nodes if all you want to do is use the capture attributes downstream."], "extent": [3523, 3742]}], "container": true}], "container": true, "role": "item_group"}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Capture and Deform"], "extent": [3742, 3766], "body": [{"type": "para", "indent": 8, "text": ["The node will perform both a capture point and deform operation."], "extent": [3766, 3840]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Capture"], "extent": [3840, 3853], "body": [{"type": "para", "indent": 8, "text": ["The node will perform ", {"type": "em", "text": ["only"]}, " a capture point operation. This is\n        intended for some customization of the weights prior to deforming."], "extent": [3853, 4001]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Deform"], "extent": [4001, 4013], "body": [{"type": "para", "indent": 8, "text": ["The node will perform ", {"type": "em", "text": ["only"]}, " a deform operation. In this mode, the\n        capture weights are expected to be found in the input geometry. This\n        can either come from a previous ", {"scheme": "Node", "value": "/nodes/sop/pointdeform", "type": "link", "text": "", "fullpath": "/nodes/sop/pointdeform.html"}, " SOP set to\n        Capture mode or a ", {"scheme": "Node", "value": "/nodes/sop/pointcapture", "type": "link", "text": "", "fullpath": "/nodes/sop/pointcapture.html"}, " SOP."], "extent": [4013, 4296]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mode"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Capture "], "extent": [4296, 4312], "body": [{"type": "para", "indent": 4, "text": ["These parameters are only available when ", {"type": "ui", "text": ["Mode"]}, " is set to ", {"type": "em", "text": ["Capture"]}, " or ", {"type": "em", "text": ["Capture and Deform"]}, "."], "extent": [4312, 4413]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Radius"], "extent": [4413, 4425], "body": [{"type": "para", "indent": 8, "text": ["Sets the maximum distance (in Houdini world units) away from each model point to look for nearby lattice points."], "extent": [4445, 4567]}], "container": true, "attrs": {"id": "radius"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Minimum Points"], "extent": [4567, 4587], "body": [{"type": "para", "indent": 8, "text": ["If a point on the model is captured by fewer lattice points that this, the search radius is increased until the point is captured by at least this many lattice points. This will cause discontinuities in output, but it is usually better than leaving points behind."], "extent": [4606, 4879]}], "container": true, "attrs": {"id": "minpt"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Maximum Points"], "extent": [4879, 4899], "body": [{"type": "para", "indent": 8, "text": ["Sets the maximum number of lattice points each point on the model can be captured by. If more than this number of points is within the ", {"type": "ui", "text": ["Radius"]}, ", only the closest points are used. The lower this value, the faster the node and the less memory it uses, but the greater the chance of discontinuities in the output."], "extent": [4917, 5239]}], "container": true, "attrs": {"id": "maxpt"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Piece Attribute"], "extent": [5239, 5260], "body": [{"type": "para", "indent": 8, "text": ["Specifies the name of a string or integer point attribute to use to treat the geometry as separate pieces. The attribute must be present on both the mesh and rest lattice. Points with the same value in this attribute are considered part of the same ", {"type": "em", "text": ["piece"]}, ". When you specify a valid piece attribute, this node deforms each piece using only the lattice points with the same piece value. This lets you deform independent objects (pieces) in a single pass."], "extent": [5285, 5752]}, {"type": "tips_group", "body": [{"ext": null, "type": "tips", "indent": 8, "text": ["Tips"], "role": "item", "extent": [5752, 5772], "body": [{"type": "bullet_group", "body": [{"blevel": 14, "type": "bullet", "indent": 12, "text": ["You can create a piece attribute based on connectivity with the ", {"scheme": "Icon", "value": "/icons/SOP/connectivity.svg", "type": "link", "text": "", "fullpath": "/icons/SOP/connectivity.svg.html"}, " ", {"scheme": "Node", "value": "/nodes/sop/connectivity", "type": "link", "text": ["Connectivity SOP"], "fullpath": "/nodes/sop/connectivity.html"}, " node."], "extent": [5772, 5932]}, {"blevel": 14, "type": "bullet", "indent": 12, "text": ["Animating the switch between deforming geometry together and as separate pieces can create a tearing-metal effect."], "extent": [5932, 6062]}], "container": true}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "pieceattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Pre-Separate Pieces"], "extent": [6062, 6087], "body": [{"type": "para", "indent": 8, "text": ["When on, the node virtually moves pieces apart before capturing to ensure they don\u2019t overlap. When many pieces are close together, this can greatly reduce the cost of the capture."], "extent": [6118, 6307]}], "container": true, "attrs": {"id": "preseparatepieces"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}, {"level": 3, "type": "sep", "indent": 0, "text": [" Deform "], "extent": [6307, 6322], "body": [{"type": "para", "indent": 4, "text": ["These parameters are only available when ", {"type": "ui", "text": ["Mode"]}, " is set to ", {"type": "em", "text": ["Deform"]}, " or ", {"type": "em", "text": ["Capture and Deform"]}, "."], "extent": [6322, 6421]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Rigid Projection"], "extent": [6421, 6443], "body": [{"type": "para", "indent": 8, "text": ["When on, the node removes any shear from the computed local transforms, leaving only a rigid transform. You can try turning this parameter off or on to see how it affects the look of your deformation. "], "extent": [6472, 6683]}], "container": true, "attrs": {"id": "rigidprojection"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Enable Mask"], "extent": [6683, 6700], "body": [{"type": "para", "indent": 8, "text": ["When on, you can mask the deformation.        "], "extent": [6724, 6780]}], "container": true, "attrs": {"id": "enablemask"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Mask"], "extent": [6780, 6790], "body": [{"type": "para", "indent": 8, "text": ["Specifies the amount to scale the deformation by. Deformations are scaled by the combination of ", {"type": "ui", "text": ["Mask"]}, " and the value of ", {"type": "ui", "text": ["Mask Attribute"]}, " on any given point if applicable. A ", {"type": "ui", "text": ["Mask"]}, " value of 0.0 will result in no deformation, while a ", {"type": "ui", "text": ["Mask"]}, " value of 1.0 will perform the full deformation."], "extent": [6808, 7112]}, {"type": "para", "indent": 8, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Mode"]}, " is set to ", {"type": "em", "text": ["Deform"]}, " or ", {"type": "em", "text": ["Capture and Deform"]}, "."], "extent": [7112, 7212]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["No Scaling"], "extent": [7212, 7232], "body": [{"type": "para", "indent": 12, "text": ["No scaling is applied to the ", {"type": "ui", "text": ["Mask"]}, " value."], "extent": [7232, 7290]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Scale by Attribute"], "extent": [7290, 7318], "body": [{"type": "para", "indent": 12, "text": ["Scale the ", {"type": "ui", "text": ["Mask"]}, " value by the point attribute specified in the ", {"type": "ui", "text": ["Mask Attribute"]}, " field."], "extent": [7318, 7422]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mask"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Mask Attribute"], "extent": [7422, 7442], "body": [{"type": "para", "indent": 8, "text": ["Specifies the point attribute that is multiplied into the ", {"type": "ui", "text": ["Mask"]}, " and used to scale the deformation on each point."], "extent": [7466, 7591]}, {"type": "para", "indent": 8, "text": ["This parameter is only available when ", {"type": "ui", "text": ["Mask \u25b8 Scale by Attribute"]}, " is selected. "], "extent": [7591, 7682]}], "container": true, "attrs": {"id": "maskattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Recompute Affected Normals"], "extent": [7682, 7714], "body": [{"type": "para", "indent": 8, "text": ["When on, recomputes any normals that are affected by polygons with both deformed and undeformed points. This only matters if you are deforming some points and not others. If you are deforming the whole geometry (or whole pieces), this has no effect since the normals are transformed."], "extent": [7746, 8039]}, {"type": "para", "indent": 8, "text": ["If ", {"type": "code", "text": ["P"]}, " (point position) is ", {"type": "em", "text": ["not"]}, " listed in the ", {"type": "ui", "text": ["Attributes to Transform"]}, " parameter field, then this setting has no effect."], "extent": [8039, 8173]}], "container": true, "attrs": {"id": "updateaffectednmls"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Attributes to Transform"], "extent": [8173, 8202], "body": [{"type": "para", "indent": 8, "text": ["Specifies which attributes are transformed by the deformation. This field accepts a space-separated list of attribute names/patterns. The default is ", {"type": "code", "text": ["*"]}, ", which specifies all attributes. The node modifies vector attributes according to their type information: as points, vectors, or normals."], "extent": [8223, 8523]}, {"type": "para", "indent": 8, "text": ["If this list includes/matches ", {"type": "code", "text": ["P"]}, ", the node will also rotate primitive transforms."], "extent": [8523, 8615]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [8615, 8629], "body": [{"type": "para", "indent": 12, "text": ["The node always modifies ", {"type": "code", "text": ["P"]}, ", regardless of whether it is in this list."], "extent": [8629, 8714]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "attribs"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Delete Capture Attributes"], "extent": [8714, 8745], "body": [{"type": "para", "indent": 8, "text": ["When on, don\u2019t include the attributes this node uses internally to track the point capture in the output. You should leave this on unless you need the capture information for something else, since turning it off increases geometry size/memory use."], "extent": [8769, 9026]}], "container": true, "attrs": {"id": "delcaptatr"}, "role": "item"}], "container": true, "role": "item_group"}], "container": true}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [9026, 9034], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Input 1"], "extent": [9034, 9044], "body": [{"type": "para", "indent": 4, "text": ["Mesh to deform. The model you want to deform according to the movement of points in a point cloud."], "extent": [9044, 9148]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Input 2"], "extent": [9148, 9157], "body": [{"type": "para", "indent": 4, "text": ["Rest point lattice. A copy of the deformation lattice points, with the points in their original starting positions. To know how the lattice is deforming, the node uses the difference between this and the ", {"type": "em", "text": ["current"]}, " version of the lattice from the third input."], "extent": [9157, 9421]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Input 3"], "extent": [9421, 9430], "body": [{"type": "para", "indent": 4, "text": ["Deformed point lattice. The ", {"type": "em", "text": ["current"]}, " version of the deformation lattice points. The node compares the point positions in this geometry to their positions in the ", {"type": "em", "text": ["rest"]}, " geometry on the second input to know how the lattice is deforming."], "extent": [9430, 9671]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "output", "container": true, "type": "output_section", "indent": 0, "role": "section", "extent": [9671, 9679], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Output 1"], "extent": [9679, 9690], "body": [{"type": "para", "indent": 4, "text": ["Geometry capture weights and/or geometry deformation point information."], "extent": [9690, 9767]}], "container": true}], "container": true}], "text": "Output"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [9767, 9776], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/pointcapture", "type": "link", "text": "", "fullpath": "/nodes/sop/pointcapture.html"}], "extent": [9776, 9803]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/deform", "type": "link", "text": "", "fullpath": "/nodes/sop/deform.html"}], "extent": [9803, 9823]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/clothdeform", "type": "link", "text": "", "fullpath": "/nodes/sop/clothdeform.html"}], "extent": [9823, 9848]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/lattice", "type": "link", "text": "", "fullpath": "/nodes/sop/lattice.html"}], "extent": [9848, 9869]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/bulge", "type": "link", "text": "", "fullpath": "/nodes/sop/bulge.html"}], "extent": [9869, 9888]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/magnet", "type": "link", "text": "", "fullpath": "/nodes/sop/magnet.html"}], "extent": [9888, 9909]}], "container": true}], "text": "Related"}], "title": ["Point Deform"], "summary": ["Deforms geometry according to an arbitrary connected point mesh."]}