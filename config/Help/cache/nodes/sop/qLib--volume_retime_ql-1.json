{"type": "root", "attrs": {"icon": "SOP/volumevelocity", "context": "sop", "type": "node", "internal": "volume_retime_ql", "version": "1", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Volume Retime qL"], "extent": [53, 74]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 1"]}], "extent": [74, 98]}, {"type": "summary", "indent": 0, "text": ["Evaluates an already-simulated volumetric at any subframe, using velocity-based advection."], "extent": [98, 196]}, {"type": "para", "indent": 0, "text": ["This operator uses DOP-network advection microsolvers to generate in-between subframes\nfrom the actual frames of volumetric simulation results.\nThis allows arbitrary retiming of simulations (including slow-motion)."], "extent": [196, 413]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [413, 419], "body": [{"type": "para", "indent": 4, "text": ["This operator ", {"type": "strong", "text": [{"type": "em", "text": ["requires"]}, " a velocity vector field"]}, " (called ", {"type": "code", "text": ["vel"]}, " by default)."], "extent": [419, 502]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "Inputs", "container": true, "type": "Inputs_section", "indent": 0, "role": "section", "extent": [502, 510], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Input Volumes"], "extent": [510, 529], "body": [{"type": "para", "indent": 8, "text": ["Connect a geometry consisting of volumetric primitives.\n        A velocity field (called ", {"type": "code", "text": ["vel"]}, ") is required."], "extent": [529, 647]}, {"type": "para", "indent": 8, "text": ["All other fields except velocity will be processed."], "extent": [647, 708]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Source Mask(s)"], "extent": [708, 728], "body": [{"type": "para", "indent": 8, "text": ["(not implemented yet)\n        Connect source volume(s) here to compensate for any advection\n        artifacts appearing at emission areas."], "extent": [728, 877]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "Parameters", "container": true, "type": "Parameters_section", "indent": 0, "role": "section", "extent": [877, 889], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Frame"], "extent": [889, 900], "body": [{"type": "para", "indent": 8, "text": ["The frame number to evaluate the input volumes for.\n        It can be a fractional frame number \u2013 in that case, all volumes\n        will be reconstructed using the two nearest whole frames'\n        volumes (using their velocity fields and advection)."], "extent": [900, 1161]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Frame Range Clamp"], "extent": [1161, 1184], "body": [{"type": "para", "indent": 8, "text": ["Clamps the input frame to the specified range (as in ", {"scheme": "Node", "value": "/nodes/sop/timeshift", "type": "link", "text": ["TimeShift SOP"], "fullpath": "/nodes/sop/timeshift.html"}, ")."], "extent": [1184, 1283]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Advection Mode"], "extent": [1283, 1303], "body": [{"type": "para", "indent": 8, "text": ["The various modes available for volume motion retiming."], "extent": [1303, 1368]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Off (Use Nearest Frame)"], "extent": [1368, 1401], "body": [{"type": "para", "indent": 12, "text": ["The nearest integer frame is returned. There is no volume processing of\n            any kind (except primitive reordering to have the velocity field last \u2013\n            this is to be in accord with the other modes.)"], "extent": [1401, 1630]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Weighted Blending"], "extent": [1630, 1657], "body": [{"type": "para", "indent": 12, "text": ["It simply blends between the two nearest frames, based on the fractional\n            part of the ", {"type": "em", "text": ["Frame"]}, " value. ", {"type": "em", "text": ["Vel Field Scale"]}, " (see below) is also applied."], "extent": [1657, 1829]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 12, "role": "item", "extent": [1829, 1846], "body": [{"type": "para", "indent": 16, "text": ["This can give surprisingly acceptable results for if the input\u2019s motion\n                is slow (and faster than full advection). It might worth a try for\n                large, slow-moving smoke bodies, for example."], "extent": [1846, 2080]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 8, "text": ["Full Velocity Advection"], "extent": [2080, 2113], "body": [{"type": "para", "indent": 12, "text": ["Proper advection, with the two nearest frames and both their velocity fields\n            are used to compute the results."], "extent": [2113, 2248]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["Velocity Mult"], "extent": [2248, 2267], "body": [{"type": "para", "indent": 8, "text": ["A multiplier on all velocity field values (applied before advection)."], "extent": [2267, 2346]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Advection Type, Advection Method, etc."], "extent": [2346, 2390], "body": [{"type": "para", "indent": 8, "text": ["See the ", {"scheme": "Node", "value": "/nodes/dop/gasadvectfield", "type": "link", "text": ["Gas Advect Field DOP"], "fullpath": "/nodes/dop/gasadvectfield.html"}, " documentation for details."], "extent": [2390, 2481]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Vel Field Scale"], "extent": [2481, 2502], "body": [{"type": "para", "indent": 8, "text": ["Scaling of the output velocity field."], "extent": [2502, 2549]}, {"type": "para", "indent": 8, "text": ["Especially if the volume is retimed heavily, the velocity field\n        has to be scaled accordingly, or the amount of motion blur will\n        be incorrect."], "extent": [2549, 2716]}, {"type": "para", "indent": 8, "text": ["Various presets are provided for convenience:"], "extent": [2716, 2771]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Default (1.0)"], "extent": [2771, 2794], "body": [{"type": "para", "indent": 12, "text": ["Resets the field to its default (constant) value."], "extent": [2794, 2857]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Compute from ", {"type": "q", "text": ["Frame"]}], "extent": [2857, 2887], "body": [{"type": "para", "indent": 12, "text": ["An expression that calculates the amount of scaling from\n            the ", {"type": "em", "text": ["Frame"]}, " parameter\u2019s value change from the current frame to the next."], "extent": [2887, 3042]}, {"type": "para", "indent": 12, "text": ["The ", {"type": "em", "text": ["Frame"]}, " parameter has to be animated (keyframes or CHOPs),\n            otherwise the expression returns ", {"type": "code", "text": ["0"]}, "."], "extent": [3042, 3168]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Compute (limited max value)"], "extent": [3168, 3205], "body": [{"type": "para", "indent": 12, "text": ["Same as the above, but the expression has an upper limit of ", {"type": "code", "text": ["1.0"]}, "."], "extent": [3205, 3286]}], "container": true}], "container": true}], "container": true}], "container": true}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3286, 3295], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::volume_flatten_ql::1", "type": "link", "text": ["Volume Flatten qL SOP"], "exists": true}], "extent": [3295, 3361]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [3361, 3373]}], "container": true}], "text": "Related"}, {"level": 1, "id": "limitations", "container": true, "type": "limitations_section", "indent": 0, "role": "section", "extent": [3373, 3386], "body": [{"type": "para", "indent": 4, "text": ["The two fields of the ", {"type": "em", "text": ["Start/End Frame"]}, " parameter pair cannot be disabled\n    individually, so they can\u2019t accurately reflect the state of the clamp mode."], "extent": [3386, 3545]}, {"type": "para", "indent": 4, "text": ["This is an UI limitation and doesn\u2019t affect functionality.\n    (Using the dual-field is a conscious decision \u2013 this allows copying range\n    expressions with a single copy/paste action.)"], "extent": [3545, 3739]}], "text": "Limitations"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [3739, 3751], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Velocity field name should be a parameter and not hardcoded"], "extent": [3751, 3817]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Add Adam\u2019s VOPSOP method as an alternative"], "extent": [3817, 3866]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Implement 2nd input (source volume mask)"], "extent": [3866, 3913]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Specify field name(s) to process? (maybe not that important)"], "extent": [3913, 3980]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Test if it works for non-scalar volumes (e.g. color \u2013 it already should)"], "extent": [3980, 4060]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Should also be able to ", {"type": "em", "text": ["directional blur"]}, " (", {"type": "q", "text": ["smear"]}, ") with the vel field? (fake motion blur)"], "extent": [4060, 4157]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["(DONE) Add frame clamping (as in TimeOffset SOP)"], "extent": [4157, 4215]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [4215, 4239], "body": [{"type": "para", "indent": 4, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [4239, 4271]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["2015-04-20"], "extent": [4271, 4287], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Resaved in H14."], "extent": [4287, 4313]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Fixed major bug: only the first non-velocity field was processed, screwing up pyro sim retimes"], "extent": [4313, 4418]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Temporary fix: blending of density/heat/temperature fields are now hardwired (will be fixed later)"], "extent": [4418, 4532]}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["2015-01-19"], "extent": [4532, 4548], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Fixed major bug: retiming returned velocity fields only on frames outside of\n          the original volume range"], "extent": [4548, 4671]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Added fixed visualization for each volume frame"], "extent": [4671, 4729]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Added display density scale parameter"], "extent": [4729, 4778]}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["2014-12-05"], "extent": [4778, 4794], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Theres a three-way switch now, called ", {"type": "em", "text": ["Advection Mode"]}], "extent": [4794, 4859]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Added frame range clamping (as in TimeShift SOP)"], "extent": [4859, 4918]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Optimization: no interpolation/blending for integer frames\n          (this also makes out-of-range results faster if range clamping is used)"], "extent": [4918, 5070]}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["2014-12-04"], "extent": [5070, 5086], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Improved speed when ", {"type": "em", "text": ["Advect by Velocity"]}, " is off (skipping internal dopnet altogether)"], "extent": [5086, 5183]}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["2014-11-22"], "extent": [5183, 5199], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Bug fix: velocity field was missing from output."], "extent": [5199, 5258]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Added post-advection scaling of velocity field\n          (so render-time motion blur will be adjusted to retimed speed)"], "extent": [5258, 5389]}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["2014-11-19"], "extent": [5389, 5405], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["First version."], "extent": [5405, 5431]}], "container": true}], "container": true}], "container": true}]}], "title": ["Volume Retime qL"], "summary": ["Evaluates an already-simulated volumetric at any subframe, using velocity-based advection."]}