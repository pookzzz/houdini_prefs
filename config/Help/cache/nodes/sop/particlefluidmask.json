{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "particlefluidmask", "icon": "SOP/particlefluidmask", "index": "no", "since": "16.0", "tags": "fluid, surface, ocean", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Particle Fluid Mask"], "extent": [139, 163]}, {"type": "summary", "indent": 0, "text": ["Generates a Volume mask from a particle fluid simulation."], "extent": [163, 229]}, {"type": "para", "indent": 0, "text": ["Connect particles and/or velocity fields from a particle fluid simulation to the ", {"type": "ui", "text": ["Particles and Volumes"]}, " input of this node to generate a volumetric mask according to several different criteria.  "], "extent": [229, 429]}, {"type": "para", "indent": 0, "text": ["Additionally one or more Ocean Spectrum layers can be connected to the third input of this node, and the generated mask can be composited into the existing spectra masks, with optional frequency filtering applied to the spectra."], "extent": [429, 659]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [659, 671], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Mask"], "extent": [671, 683], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Particle Separation"], "extent": [683, 705], "body": [{"type": "para", "indent": 4, "text": ["The distance between two particles in the fluid simulation. This parameter should generally reference the same parameter on the ", {"scheme": "Node", "value": "/nodes/dop/flipobject", "type": "link", "text": ["FLIP Object"], "fullpath": "/nodes/dop/flipobject.html"}, " of the input simulation."], "extent": [705, 897]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Resolution Scale"], "extent": [897, 915], "body": [{"type": "para", "indent": 4, "text": ["Scale the output mask volume relative to the input particles and/or velocity fields.  This parameter can often be set below 1, because a mask is often blurred using the ", {"type": "ui", "text": ["Filter"]}, " parameter, and very high resolution masks are usually not worth the processing expense."], "extent": [915, 1188]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use Input Volumes Only"], "extent": [1188, 1212], "body": [{"type": "para", "indent": 4, "text": ["Ignore particle input and create the mask only from an input velocity volume.  In general this operation is faster than using particles and is very useful for previewing mask values; however, it will be less accurate and might miss areas where only a few particles exist and the velocity field is not defined in the source FLIP simulation.  "], "extent": [1212, 1559]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spectrum Mask Type"], "extent": [1559, 1579], "body": [{"type": "para", "indent": 4, "text": ["Controls if the mask should be combined with any ocean spectra plugged into the second input, and if so, whether it should suppress or contribute to the ocean waves."], "extent": [1579, 1750]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Conditions"], "extent": [1750, 1769], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Velocity Range"], "extent": [1769, 1786], "body": [{"type": "para", "indent": 4, "text": ["Generate a mask where surface areas with velocity below the minimum speed get no masking, while areas above the maximum speed get full masking."], "extent": [1786, 1935]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vorticity Range"], "extent": [1935, 1952], "body": [{"type": "para", "indent": 4, "text": ["Generate a mask where surface areas with vorticity below the minimum speed get no masking, while areas above the maximum vorticity get full masking."], "extent": [1952, 2106]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Collision Offset"], "extent": [2106, 2124], "body": [{"type": "para", "indent": 4, "text": ["Generate a mask within the specified world-space offset of any collision objects or volumes connected to the second input."], "extent": [2124, 2252]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Height Range"], "extent": [2252, 2266], "body": [{"type": "para", "indent": 4, "text": ["Generate a mask where areas below the minimum height get no masking, while areas above the maximum height get full masking.   The height is measured relative to the specified ", {"type": "ui", "text": ["Plane"]}, "."], "extent": [2266, 2457]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Conditions Combine"], "extent": [2457, 2477], "body": [{"type": "para", "indent": 4, "text": ["The operation used to combine multiple filter masks from the ", {"type": "ui", "text": ["Conditions"]}, " tab."], "extent": [2477, 2563]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Regions"], "extent": [2563, 2579], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Use Bounding Box"], "extent": [2579, 2598], "body": [{"type": "para", "indent": 4, "text": ["Fade out the mask as it reaches the edge of the specified bounding box, according to the ", {"type": "ui", "text": ["Falloff Shape"]}, " and ", {"type": "ui", "text": ["Falloff Distance"]}, "."], "extent": [2598, 2736]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Size"], "extent": [2736, 2743], "body": [{"type": "para", "indent": 4, "text": ["The size of the bounding box."], "extent": [2743, 2778]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Center"], "extent": [2778, 2786], "body": [{"type": "para", "indent": 4, "text": ["The center of the bounding box."], "extent": [2786, 2823]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Falloff Shape"], "extent": [2823, 2838], "body": [{"type": "para", "indent": 4, "text": ["The shape in which the mask should falloff as it approaches the edges of the bounding box.  If creating a mask for a fluid mesh created with the ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface SOP"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, " with ", {"type": "ui", "text": ["Flatten Geometry"]}, " enabled, this value should match the flattening ", {"type": "ui", "text": ["Shape"]}, "."], "extent": [2838, 3132]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Falloff Distance"], "extent": [3132, 3150], "body": [{"type": "para", "indent": 4, "text": ["The distance at which the mask should falloff as it approaches the edges of the bounding box.  If creating a mask for a fluid mesh created with the ", {"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": ["Particle Fluid Surface SOP"], "fullpath": "/nodes/sop/particlefluidsurface.html"}, " with ", {"type": "ui", "text": ["Flatten Geometry"]}, " enabled, this value should match the flattening ", {"type": "ui", "text": ["Distance"]}, "."], "extent": [3150, 3450]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Plane"], "extent": [3450, 3457], "body": [{"type": "para", "indent": 4, "text": ["The plane in which height is measured and falloff occurs."], "extent": [3457, 3520]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Invert Bounding Box"], "extent": [3520, 3541], "body": [{"type": "para", "indent": 4, "text": ["Invert the mask created by the specified bounding box."], "extent": [3541, 3601]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Regions Combine"], "extent": [3601, 3618], "body": [{"type": "para", "indent": 4, "text": ["The operation used to combine masks from the ", {"type": "ui", "text": ["Regions"]}, " tab with those from the ", {"type": "ui", "text": ["Conditions"]}, "."], "extent": [3618, 3720]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Mapping"], "extent": [3720, 3736], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Filter"], "extent": [3736, 3745], "body": [{"type": "para", "indent": 4, "text": ["The type of smoothing to apply to the mask."], "extent": [3745, 3794]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Use World Space Radius Units"], "extent": [3794, 3824], "body": [{"type": "para", "indent": 4, "text": ["Specify the ", {"type": "ui", "text": ["Filter Radius"]}, " in world space rather than voxel units."], "extent": [3824, 3899]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Voxel Radius"], "extent": [3899, 3913], "body": [{"type": "para", "indent": 4, "text": ["The size of the filter radius in voxel units."], "extent": [3913, 3964]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Filter Radius"], "extent": [3964, 3979], "body": [{"type": "para", "indent": 4, "text": ["The size of the filter radius in world units."], "extent": [3979, 4030]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Iterations"], "extent": [4030, 4042], "body": [{"type": "para", "indent": 4, "text": ["The number of smoothing iterations to perform."], "extent": [4042, 4094]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Invert Mask"], "extent": [4094, 4107], "body": [{"type": "para", "indent": 4, "text": ["Invert the output mask."], "extent": [4107, 4136]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Mask"], "extent": [4136, 4148], "body": [{"type": "para", "indent": 4, "text": ["Remap the output mask according to the ", {"type": "ui", "text": ["Remap Ramp"]}, "."], "extent": [4148, 4208]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Ramp"], "extent": [4208, 4220], "body": [{"type": "para", "indent": 4, "text": ["The ramp for remapping the mask output."], "extent": [4220, 4265]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Spectrum"], "extent": [4265, 4280], "body": [{"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Amplitude"], "extent": [4280, 4299], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Filter Above Resolution"], "extent": [4299, 4325], "body": [{"type": "para", "indent": 4, "text": ["Dampen any waves that would exist in an ocean spectrum higher than this resolution.  For example if set to 8, this spectrum will have no higher frequencies than a spectrum of resolution 8.  This parameter can be useful along with ", {"type": "ui", "text": ["Filter Below Resolution"]}, " when layering spectra and applying masks and noise to only the highest frequencies."], "extent": [4325, 4672]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Filter Below Resolution"], "extent": [4672, 4697], "body": [{"type": "para", "indent": 4, "text": ["Dampen any waves that would exist only in an ocean spectrum lower than this resolution.  For example if set to 8, this spectrum will contain only frequencies higher than a spectrum of resolution 8.  This parameter can be useful along with ", {"type": "ui", "text": ["Filter Above Resolution"]}, " when layering spectra and applying masks and noise to only the highest frequencies."], "extent": [4697, 5053]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Filter Above Wavelength"], "extent": [5053, 5078], "body": [{"type": "para", "indent": 4, "text": ["Dampen any waves that have a longer wavelength than this value."], "extent": [5078, 5147]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Filter Below Wavelength"], "extent": [5147, 5172], "body": [{"type": "para", "indent": 4, "text": ["Dampen any waves that have a shorter wavelength than this value."], "extent": [5172, 5242]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remove Non-Spectral Waves"], "extent": [5242, 5269], "body": [{"type": "para", "indent": 4, "text": ["Remove any non-spectral instanced waves, usually those created by the ", {"scheme": "Node", "value": "/nodes/sop/oceanwaves", "type": "link", "text": ["Ocean Waves SOP"], "fullpath": "/nodes/sop/oceanwaves.html"}, ".  Since these waves are typically low-frequency, this option is useful in combination with ", {"type": "ui", "text": ["Filter Below Resolution"]}, " to remove all low frequencies from the input spectra."], "extent": [5269, 5555]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}]}], "text": "Parameters"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [5555, 5563], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Particles and Volumes"], "extent": [5563, 5587], "body": [{"type": "para", "indent": 4, "text": ["Particle geometry and/or velocity field, usually from a FLIP simulation."], "extent": [5587, 5665]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Collision Objects and Volumes"], "extent": [5665, 5696], "body": [{"type": "para", "indent": 4, "text": ["Geometry and SDF volumes to subtract from the fluid surface."], "extent": [5696, 5762]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Ocean Spectrum"], "extent": [5762, 5778], "body": [{"type": "para", "indent": 4, "text": ["One or more ocean spectrum layers from Ocean Spectrum SOP(s)."], "extent": [5778, 5845]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [5845, 5854], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Mask"], "extent": [5854, 5861], "body": [{"type": "para", "indent": 4, "text": ["The mask volume."], "extent": [5861, 5883]}], "container": true}, {"type": "dt", "indent": 0, "text": ["Ocean Spectrum"], "extent": [5883, 5899], "body": [{"type": "para", "indent": 4, "text": ["The input ocean spectrum layers possibly filtered and / or with the generated mask composited in."], "extent": [5899, 6002]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [6002, 6011], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/particlefluidsurface", "type": "link", "text": "", "fullpath": "/nodes/sop/particlefluidsurface.html"}], "extent": [6011, 6046]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/oceanspectrum", "type": "link", "text": "", "fullpath": "/nodes/sop/oceanspectrum.html"}], "extent": [6046, 6073]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/flipsolver", "type": "link", "text": "", "fullpath": "/nodes/dop/flipsolver.html"}], "extent": [6073, 6097]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/sop/fluidcompress", "type": "link", "text": "", "fullpath": "/nodes/sop/fluidcompress.html"}], "extent": [6097, 6124]}], "container": true}], "text": "Related"}], "title": ["Particle Fluid Mask"], "summary": ["Generates a Volume mask from a particle fluid simulation."]}