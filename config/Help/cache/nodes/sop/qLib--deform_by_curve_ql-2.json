{"type": "root", "attrs": {"icon": "DOP/gascurveforce", "context": "sop", "type": "node", "internal": "deform_by_curve_ql", "version": "2", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Deform by Curve qL"], "extent": [52, 75]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 2"]}], "extent": [75, 99]}, {"type": "summary", "indent": 0, "text": ["Deforms the input geometry (including volumes) using rest/deform curve pair(s)."], "extent": [99, 186]}, {"type": "para", "indent": 0, "text": ["This operator deforms both regular geometry and volumes using pair(s) of rest and deform curves."], "extent": [186, 284]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/nodes/sop/qLib--deform_by_curve_ql-2/deform_by_curve_ql_main.png", "type": "img", "text": ""}], "extent": [284, 328]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["(todo: example image)"], "extent": [328, 353]}], "container": true}, {"type": "para", "indent": 0, "text": ["To define the rest and deformed coordinate systems along the curves,\nthe regular ", {"scheme": null, "value": "/copy/instanceattrs", "type": "link", "text": ["Copying and instancing attributes"], "fullpath": "/copy/instanceattrs.html"}, " are used."], "extent": [353, 501]}, {"type": "para", "indent": 0, "text": ["It\u2019s recommended to define at least a normal (", {"type": "var", "text": ["N"]}, ") and ", {"type": "var", "text": ["up"]}, " vector on the curve points."], "extent": [501, 594]}, {"type": "para", "indent": 0, "text": ["See the ", {"scheme": "Node", "value": "/nodes/sop/qLib::curve_frame_ql::1", "type": "link", "text": ["Curve Frame qL SOP"], "exists": true}, " or the\n", {"scheme": "Node", "value": "/nodes/sop/orientalongcurve", "type": "link", "text": ["Orientation Along Curve SOP (18.0+)"], "fullpath": "/nodes/sop/orientalongcurve.html"}, " on how to generate such\nreference frame vectors."], "extent": [594, 777]}, {"level": 1, "id": "usage", "container": true, "type": "usage_section", "indent": 0, "text": ["Usage tips and notes"], "role": "section", "extent": [777, 805], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Copying/instancing (or curve frame reference) attributes should be present to get\n  decent deformations. If not present, ", {"type": "var", "text": ["N"]}, " defaults to ", {"type": "code", "text": ["{0,0,1}"]}, " (positive Z axis)\n  and ", {"type": "var", "text": ["up"]}, " defaults to ", {"type": "code", "text": ["{0,1,0}"]}, " (positive Y axis)."], "extent": [805, 1030]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Although all standard instancing attributes are supported, quaternion interpolation\n  for ", {"type": "var", "text": ["orient"]}, " and ", {"type": "var", "text": ["rot"]}, " attributes are not currently implemented, so it\u2019s recommended\n  to use a vector pair to define local reference frame coordinate systems."], "extent": [1030, 1285]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Curve ", {"type": "em", "text": ["pairs"]}, " (rest/deform) are also supported, i.e. the first rest curve pairs up with\n  the first deform curve, etc."], "extent": [1285, 1409]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Curves can be of different types (e.g. polylines/NURBS), and can have different point\n  counts. For example it\u2019s valid to use a two-point polyline as rest curve, and a detailed\n  NURBS curve as it\u2019s deform curve counterpart."], "extent": [1409, 1639], "body": [{"type": "tip_group", "body": [{"type": "tip", "indent": 2, "role": "item", "extent": [1639, 1646], "body": [{"type": "para", "indent": 4, "text": ["The higher resampled (more points) the deform curves are, the smoother the results\n    (NURBS curves would work as well, but they're way slower to sample)."], "extent": [1646, 1807]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["This operator supports density-like scalar volumes and color fields only\n  (it doesn\u2019t compute correct results on velocity/vector and SDF fields)."], "extent": [1807, 1957], "body": [{"type": "para", "indent": 2, "text": ["All volumes will be automatically converted to VDBs."], "extent": [1957, 2013]}], "container": true}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2013, 2025], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Deform Geometry"], "extent": [2025, 2046], "body": [{"type": "para", "indent": 8, "text": ["Apply the deformation to regular geometry.\n        If disabled, no geometry will be output (even if the input contained any.)"], "extent": [2046, 2180]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Deform Volumes"], "extent": [2180, 2200], "body": [{"type": "para", "indent": 8, "text": ["Apply the deformation to volumes.\n        If disabled, no volumes will be output (even if the input contained any.)"], "extent": [2200, 2325]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Geometry"], "extent": [2325, 2339], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Envelope / Weight"], "extent": [2339, 2366], "body": [{"type": "para", "indent": 12, "text": ["Regular deformation weighting parameters."], "extent": [2366, 2433]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Piece Attribute"], "extent": [2433, 2454], "body": [{"type": "para", "indent": 8, "text": ["The name of a string or integer attribute to treat the geometry as separate pieces.\n        The attribute must be present on both the geometry to be deformed, and the rest\n        curve(s). It can either be point or primitive class on the deforming geometry,\n        and has to be primitive on the rest input. Elements with the same value will be\n        considered the same ", {"type": "q", "text": ["piece"]}, "."], "extent": [2454, 2851]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Volume"], "extent": [2851, 2863], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Voxel Scale"], "extent": [2863, 2884], "body": [{"type": "para", "indent": 12, "text": ["If enabled, volumes will be resampled before the volume deformation\n            operation. Higher values mean lower volume resolution."], "extent": [2884, 3044]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 12, "role": "item", "extent": [3044, 3061], "body": [{"type": "para", "indent": 16, "text": ["This can be used to speed up interactive feedback\n                when dealing with volumes."], "extent": [3061, 3171]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 8, "text": ["VDB Masking"], "extent": [3171, 3192], "body": [{"type": "para", "indent": 12, "text": ["If enabled, all the VDB volumes will be ", {"type": "q", "text": ["masked"]}, "\n            by one of the specified volumes (density by default).\n            It can be useful to mask out ", {"type": "q", "text": ["leftover"]}, " volume data\n            that\u2019s not required any more\n            (e.g. color values outside a density field)."], "extent": [3192, 3482]}], "container": true}], "container": true}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3482, 3491], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::deform_by_tetra_ql::1", "type": "link", "text": ["Deform by Tetra qL SOP"], "exists": true}], "extent": [3491, 3565]}], "container": true}], "text": "Related"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [3565, 3577], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Shrinking deformations are low quality (no averaging of multiple source voxels) (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/997", "type": "link", "text": ["#997"], "exists": true}, ")"], "extent": [3577, 3712]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Deformation weight currently only blends P attribute properly"], "extent": [3712, 3780]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Support quaternion interpolation for orient/rot?"], "extent": [3780, 3837]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [3837, 3861], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 2"]}, " \u2014"], "extent": [3861, 3889]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2023-02-16"], "extent": [3889, 3901], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Geometry deformation now supports piece attribute (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1355", "type": "link", "text": ["#1355"], "exists": true}, ")"], "extent": [3901, 4008]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Enabled support for affecting other attributes than P"], "extent": [4008, 4069]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-08-17"], "extent": [4069, 4081], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Doesn\u2019t depend on unique ", {"type": "q", "text": ["name"]}, " attributes any more (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1101", "type": "link", "text": ["#1101"], "exists": true}, ")"], "extent": [4081, 4190]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["Mask All Volumes"]}, " feature from Deform by Tetra qL SOP (volume deformation option)"], "extent": [4190, 4286]}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [4286, 4313]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2020-03-03"], "extent": [4313, 4325], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["proxy scale"]}, " network editor indicator (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/994", "type": "link", "text": ["#994"], "exists": true}, ")"], "extent": [4325, 4426]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-03-02"], "extent": [4426, 4438], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed regular geo/volume issues (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/988", "type": "link", "text": ["#988"], "exists": true}, ")"], "extent": [4438, 4526]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-29"], "extent": [4526, 4538], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated usage tips to recommend highly resampled poly curves over NURBS (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/985", "type": "link", "text": ["#985"], "exists": true}, ")"], "extent": [4538, 4665]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Minor internal cleanups, added notes"], "extent": [4665, 4708]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Started working on Transform by Attrib-based version for regular geometry"], "extent": [4708, 4789]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-16"], "extent": [4789, 4801], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated deformation code so (hopefully) will work under all circumstances."], "extent": [4801, 4882], "body": [{"type": "bullet_group", "body": [{"blevel": 8, "type": "bullet", "indent": 6, "text": ["To be tested"], "extent": [4882, 4903]}], "container": true}], "container": true}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated help card with notes and tips"], "extent": [4903, 4948]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-11"], "extent": [4948, 4960], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["First (prototype) version."], "extent": [4960, 4994]}], "container": true}], "container": true}], "container": true}]}], "title": ["Deform by Curve qL"], "summary": ["Deforms the input geometry (including volumes) using rest/deform curve pair(s)."]}