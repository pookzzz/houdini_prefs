{"type": "root", "attrs": {"type": "node", "context": "sop", "icon": "SHELF/whitewater", "internal": "whitewatersource::2.0", "version": "2.0", "since": "20.0", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Whitewater Source"], "extent": [111, 133]}, {"type": "summary", "indent": 0, "text": [" Generates source volumes for whitewater simulations. "], "extent": [133, 196]}, {"type": "para", "indent": 0, "text": ["The Whitewater Source SOP generates an emission field that is used by the ", {"scheme": "Node", "value": "/nodes/sop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/sop/whitewatersolver.html"}, " to spawn particles. The values in the emission field determine, if whitewater will appear at that point. You can approximate amount and location of the newly-created whitewater by visualizing the generated ", {"type": "code", "text": ["emit"]}, " VDB: the fog\u2019s density is directly related to the birth rate. This node is also able to source whitewater particles using the same method as the ", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver.html"}, ". The whitewater particles are colored according to their emission criteria. This way you can evaluate particle counts and fine-tune emission controls with direct visual feedback."], "extent": [196, 900]}, {"type": "para", "indent": 0, "text": ["In contrast to the previous particle-based sourcing, the new system is scale-independent and takes the underlying liquid simulation into consideration. You can directly control the physical amount of whitewater, without having to consider particle counts. Additionally, the new system is\ndesigned to facilitate full-pipeline prototyping for fluid simulations. You can now work with low resolution settings to find a satisfying overall look for both liquid and whitewater simulations. The\nparticle count can then be increased for a hi-res final pass on both solvers, without having to care about significant changes in the amount of whitewater."], "extent": [900, 1545]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1545, 1551], "body": [{"type": "para", "indent": 4, "text": ["This operator expects ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, " volumes in its input."], "extent": [1551, 1620]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "inputs", "container": true, "type": "inputs_section", "indent": 0, "role": "section", "extent": [1620, 1628], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Liquid Simulation"], "extent": [1628, 1651], "body": [{"type": "para", "indent": 8, "text": ["Surface and velocity volumes or VDBs from a liquid simulation."], "extent": [1651, 1723]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Extra Source Points"], "extent": [1723, 1748], "body": [{"type": "para", "indent": 8, "text": ["Extra points to splat into the emission volume. The emission amount for each extra source point (indicated by the value of its ", {"type": "ui", "text": ["Emission Attribute"]}, ") is distributed trilinearly to its nearest voxels."], "extent": [1748, 1958]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Emission Mask"], "extent": [1958, 1977], "body": [{"type": "para", "indent": 8, "text": ["Mask to limit the emission regions."], "extent": [1977, 2022]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [2022, 2031], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Volumes"], "extent": [2031, 2044], "body": [{"type": "para", "indent": 8, "text": ["Geometry, containing the emission volume (", {"type": "code", "text": ["emit"]}, "). If ", {"type": "ui", "text": ["Output Volumes"]}, " is turned on, the geometry also contains the fluid\u2019s ", {"type": "code", "text": ["surface"]}, " and ", {"type": "code", "text": ["vel"]}, " fields. If ", {"type": "ui", "text": ["Source Particles"]}, " is turned on, the whitewater particles are also included."], "extent": [2044, 2289]}], "container": true}], "container": true}], "text": "Outputs"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2289, 2301], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Emission"], "extent": [2301, 2317], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Limit by Depth"], "extent": [2317, 2334], "body": [{"type": "para", "indent": 4, "text": ["When turned on, whitewater will only be emitted within the specified range of depths."], "extent": [2356, 2447]}], "container": true, "attrs": {"id": "limitbydepth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Half-Width"], "extent": [2447, 2467], "body": [{"type": "para", "indent": 4, "text": ["When turned on, the system tries to activate the signed distance VDB to ensure that accurate depth readings to the specified limiting values are made. The ", {"type": "ui", "text": ["Maximum Half-Width"]}, " parameter can be used to limit the number of voxels that are activated to save computing resources."], "extent": [2489, 2776]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [2776, 2786], "body": [{"type": "para", "indent": 8, "text": ["This should be turned on when using Narrow Band, and off for dense SDFs such as oceans."], "extent": [2786, 2883]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "maxhalfwidth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Speed Range"], "extent": [2883, 2896], "body": [{"type": "para", "indent": 4, "text": ["All regions of the liquid with a speed, greater than the minimum, can emit whitewater. Regions, moving at or above the maximum speed will always emit whitewater."], "extent": [2916, 3083]}], "container": true, "attrs": {"id": "speedrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Speed"], "extent": [3083, 3096], "body": [{"type": "para", "indent": 4, "text": ["By default, speed is mapped linearly to a ", {"type": "code", "text": ["(0, 1)"]}, " range. This behavior can be changed by specifying a custom mapping."], "extent": [3116, 3240]}], "container": true, "attrs": {"id": "remapspeed"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Emission"], "extent": [3240, 3256], "body": [{"type": "para", "indent": 4, "text": ["You can optionally remap the final emission probability with the ", {"type": "ui", "text": ["Emission Ramp"]}, "."], "extent": [3279, 3368]}], "container": true, "attrs": {"id": "remapemission"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Curvature"], "extent": [3368, 3384], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Curvature"], "extent": [3384, 3406], "body": [{"type": "para", "indent": 4, "text": ["Enhance emission rates with the curvature of the surface SDF. Curvature is an effective method to detect the leading edges of breaking waves."], "extent": [3431, 3578]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [3578, 3588], "body": [{"type": "para", "indent": 8, "text": ["High resolution fluid simulations tend to contain fine details that may result in spurious curvature-based sourcing. For better results, consider smoothing the surface field with the parameters of the ", {"type": "ui", "text": ["Volumes"]}, " tab\u2019s ", {"type": "ui", "text": ["Surface Filtering"]}, " subpane."], "extent": [3588, 3847]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "enablecurvature"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Velocity Angle"], "extent": [3847, 3867], "body": [{"type": "para", "indent": 4, "text": ["The angle between the velocity of the particle and the surface normal must be lower than this value for whitewater emission. This limit helps to ensure that whitewater is only created on the leading edges of waves."], "extent": [3888, 4108]}], "container": true, "attrs": {"id": "maxvelangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Curvature Range"], "extent": [4108, 4125], "body": [{"type": "para", "indent": 4, "text": ["Range of curvatures that gets mapped to a ", {"type": "code", "text": ["(0, 1)"]}, " emission range."], "extent": [4149, 4221]}], "container": true, "attrs": {"id": "curvaturerange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Curvature"], "extent": [4221, 4238], "body": [{"type": "para", "indent": 4, "text": ["By default, the curvature is mapped linearly to a ", {"type": "code", "text": ["(0, 1)"]}, " range. This behavior can be changed by specifying a custom mapping curve."], "extent": [4262, 4400]}], "container": true, "attrs": {"id": "remapcurvature"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Acceleration"], "extent": [4400, 4419], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Acceleration"], "extent": [4419, 4444], "body": [{"type": "para", "indent": 4, "text": ["Increase emission rates with the magnitude of acceleration. Acceleration is effective at detecting areas where particles are rejoining existing parts of the fluid. This results in trapped air that causes whitewater. Note that this parameter uses Eulerian acceleration, which is the time-rate of changes in the fluid\u2019s velocity at fixed locations in space."], "extent": [4472, 4833]}], "container": true, "attrs": {"id": "enableacceleration"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Acceleration Range"], "extent": [4833, 4853], "body": [{"type": "para", "indent": 4, "text": ["Range of accelerations that gets mapped to a ", {"type": "code", "text": ["(0, 1)"]}, " emission range."], "extent": [4880, 4955]}], "container": true, "attrs": {"id": "accelerationrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Acceleration"], "extent": [4955, 4975], "body": [{"type": "para", "indent": 4, "text": ["By default, the acceleration is mapped linearly to a ", {"type": "code", "text": ["(0, 1)"]}, " range. This behavior can be changed by specifying a custom mapping curve."], "extent": [5002, 5143]}], "container": true, "attrs": {"id": "remapacceleration"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Vorticity"], "extent": [5143, 5159], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Emit from Vorticity"], "extent": [5159, 5181], "body": [{"type": "para", "indent": 4, "text": ["Enhance emission rates based on vorticity (or magnitude of rotation) inside the velocity volume. This method identifies churning areas of the fluid, which generally occur deeper below the surface."], "extent": [5206, 5408]}], "container": true, "attrs": {"id": "enablevorticity"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vorticity Range"], "extent": [5408, 5425], "body": [{"type": "para", "indent": 4, "text": ["Range of vorticities that gets mapped to a ", {"type": "code", "text": ["(0, 1)"]}, " emission range."], "extent": [5449, 5522]}], "container": true, "attrs": {"id": "vorticityrange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remap Vorticity"], "extent": [5522, 5539], "body": [{"type": "para", "indent": 4, "text": ["By default, vorticity is mapped linearly to a ", {"type": "code", "text": ["(0, 1)"]}, " range. This behavior can be changed by specifying a custom mapping curve."], "extent": [5563, 5697]}], "container": true, "attrs": {"id": "remapvorticity"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Extra Sources"], "extent": [5697, 5717], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Add Extra Sources"], "extent": [5717, 5737], "body": [{"type": "para", "indent": 4, "text": ["Use points of the second input as additional whitewater sources."], "extent": [5759, 5829]}], "container": true, "attrs": {"id": "extrasources"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Group"], "extent": [5829, 5836], "body": [{"type": "para", "indent": 4, "text": ["Only points of the second input that are part of this group will be used for extra emission."], "extent": [5851, 5949]}], "container": true, "attrs": {"id": "group"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Attribute"], "extent": [5949, 5969], "body": [{"type": "para", "indent": 4, "text": ["Name of the attribute that stores the amount of emission for each source point. If the specified attribute does not exist, no extra emission will be added."], "extent": [5989, 6150]}], "container": true, "attrs": {"id": "emitattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Particle Scale"], "extent": [6150, 6166], "body": [{"type": "para", "indent": 4, "text": ["The ", {"type": "code", "text": ["pscale"]}, " attribute is scaled by this value. Increase this value to add a larger footprint to the extra emission points."], "extent": [6189, 6318]}], "container": true, "attrs": {"id": "particlescale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Merge Method"], "extent": [6318, 6332], "body": [{"type": "para", "indent": 4, "text": ["This parameter controls how extra sourcing is combined with the emission volume."], "extent": [6353, 6439]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["Add"]}], "extent": [6439, 6452], "body": [{"type": "para", "indent": 8, "text": ["Extra emission is added to the original volume."], "extent": [6452, 6508]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["Maximum"]}], "extent": [6508, 6525], "body": [{"type": "para", "indent": 8, "text": ["Final emission is the maximum of the original volume and extra\n        emission."], "extent": [6525, 6614]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "ui", "text": ["Override"]}], "extent": [6614, 6632], "body": [{"type": "para", "indent": 8, "text": ["Emission in the areas influenced by extra sources is replaced by their\n        value."], "extent": [6632, 6727]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "mergemethod"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Volumes"], "extent": [6727, 6741], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Output Volumes"], "extent": [6741, 6758], "body": [{"type": "para", "indent": 4, "text": ["When this option is turned on, the node also outputs the fluid\u2019s signed distance field (", {"type": "code", "text": ["surface"]}, ") and velocity field (", {"type": "code", "text": ["vel"]}, ")."], "extent": [6781, 6913]}], "container": true, "attrs": {"id": "outputvolumes"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Voxel Size"], "extent": [6913, 6925], "body": [{"type": "para", "indent": 4, "text": ["Voxel size for the emission volume."], "extent": [6944, 6985]}], "container": true, "attrs": {"id": "voxelsize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Size"], "extent": [6985, 7000], "body": [{"type": "para", "indent": 4, "text": ["Physical size of the emission region. This option can be used to restrict emission to a certain subregion of the fluid simulation."], "extent": [7023, 7159]}], "container": true, "attrs": {"id": "boundemission"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Center"], "extent": [7159, 7176], "body": [{"type": "para", "indent": 4, "text": ["Center of the restricted emission region."], "extent": [7191, 7238]}], "container": true, "attrs": {"id": "emitt"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mask Name"], "extent": [7238, 7249], "body": [{"type": "para", "indent": 4, "text": ["Name (or name pattern) of the primitive you want to use as an emission mask."], "extent": [7267, 7349]}], "container": true, "attrs": {"id": "maskname"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Surface Filtering"], "extent": [7349, 7375], "body": [{"type": "para", "indent": 0, "text": ["The filtering operations in this section can be used to smooth the surface field before it\u2019s used for generating the emission field. This helps to eliminate noise from curvature-based emission."], "extent": [7375, 7571]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [7571, 7577], "body": [{"type": "para", "indent": 4, "text": ["Dilation is performed first, followed by smoothing and, finally, erosion."], "extent": [7577, 7656]}], "container": true}, {"type": "note", "indent": 0, "role": "item", "extent": [7656, 7662], "body": [{"type": "para", "indent": 4, "text": ["If ", {"type": "ui", "text": ["Output Volumes"]}, " is turned on, the filtered surface will be exported by this node. Be careful with transferring the filtered surface to the ", {"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver.html"}, ". Aggressive smoothing may create suddenly disappearing fluid regions."], "extent": [7662, 7928]}], "container": true}], "container": true, "role": "item_group"}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Dilate"], "extent": [7928, 7936], "body": [{"type": "para", "indent": 4, "text": ["The surface is expanded by this number of voxels."], "extent": [7958, 8013]}], "container": true, "attrs": {"id": "dilatevoxels"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Smooth"], "extent": [8013, 8021], "body": [{"type": "para", "indent": 4, "text": ["Turn on the filter to choose a smoothing method from the dropdown menu and determine the number of filter iterations. Higher values create smoother surfaces, but will also remove detail."], "extent": [8040, 8232]}], "container": true, "attrs": {"id": "operation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erode"], "extent": [8232, 8239], "body": [{"type": "para", "indent": 4, "text": ["The surface is shrunk by this number of voxels."], "extent": [8260, 8313]}], "container": true, "attrs": {"id": "erodevoxels"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [8313, 8333], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Visualize Emission Volume"], "extent": [8333, 8361], "body": [{"type": "para", "indent": 4, "text": ["When this parameter is turned off, the generated ", {"type": "code", "text": ["emit"]}, " volume is invisible and won\u2019t be rendered in the viewport."], "extent": [8381, 8501]}], "container": true, "attrs": {"id": "visemitvol"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Particles"], "extent": [8501, 8519], "body": [{"type": "para", "indent": 4, "text": ["When this option is turned on, the whitewater particles give you an idea of the amount of emitted whitewater for the ", {"type": "code", "text": ["emit"]}, " volume."], "extent": [8544, 8681]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [8681, 8691], "body": [{"type": "para", "indent": 8, "text": ["If ", {"type": "ui", "text": ["Limit Emission"]}, " is turned on, the actual number of particles, seeded by the solver, may be significantly lower than this approximation."], "extent": [8691, 8842]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "createparticles"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Whitewater Scale"], "extent": [8842, 8860], "body": [{"type": "para", "indent": 4, "text": ["Whitewater scale controls the number of particles that are created to fill\n    a given volume. The parameter\u2019s value should match the solver\u2019s ", {"type": "ui", "text": ["Whitewater Scale"]}, "."], "extent": [8877, 9047]}], "container": true, "attrs": {"id": "wwscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Emission Amount"], "extent": [9047, 9064], "body": [{"type": "para", "indent": 4, "text": ["The parameter\u2019s value should match the solver\u2019s ", {"type": "ui", "text": ["Emission Amount"]}, "."], "extent": [9088, 9162]}], "container": true, "attrs": {"id": "emissionamount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Curvature Color"], "extent": [9162, 9179], "body": [{"type": "para", "indent": 4, "text": ["Color of the particles from the ", {"type": "ui", "text": ["Curvature"]}, " emission."], "extent": [9203, 9264]}], "container": true, "attrs": {"id": "curvaturecolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Acceleration Color"], "extent": [9264, 9284], "body": [{"type": "para", "indent": 4, "text": ["Color of the particles from the ", {"type": "ui", "text": ["Acceleration"]}, " emission."], "extent": [9311, 9375]}], "container": true, "attrs": {"id": "accelerationcolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Vorticity Color"], "extent": [9375, 9392], "body": [{"type": "para", "indent": 4, "text": ["Color of the particles from the ", {"type": "ui", "text": ["Vorticity"]}, " emission."], "extent": [9416, 9477]}], "container": true, "attrs": {"id": "vorticitycolor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Extra Color"], "extent": [9477, 9490], "body": [{"type": "para", "indent": 4, "text": ["Color of the particles from the ", {"type": "ui", "text": ["Extra Sources"]}, " emission."], "extent": [9510, 9575]}], "container": true, "attrs": {"id": "extracolor"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [9575, 9584], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/whitewatersolver", "type": "link", "text": ["Whitewater Solver"], "fullpath": "/nodes/dop/whitewatersolver.html"}], "extent": [9584, 9635]}], "container": true}], "text": "Related"}], "title": ["Whitewater Source"], "summary": [" Generates source volumes for whitewater simulations. "]}