{"type": "root", "attrs": {"icon": "SOP/tetrahedralize", "context": "sop", "type": "node", "internal": "deform_by_tetra_ql", "version": "2", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Deform by Tetra qL"], "extent": [53, 76]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 2"]}], "extent": [76, 100]}, {"type": "summary", "indent": 0, "text": ["Deforms the input geometry (including volumes) using tetrahedrons."], "extent": [100, 174]}, {"type": "para", "indent": 0, "text": ["This operator deforms both regular geometry and volumes using tetrahedra.\nIt performs the deformation using a ", {"type": "em", "text": ["rest"]}, " and a ", {"type": "em", "text": ["deformed"]}, " version of the same\ntetrahedron mesh."], "extent": [174, 347]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/nodes/sop/qLib--deform_by_tetra_ql-2/deform_by_tetra_ql_main.png", "type": "img", "text": ""}], "extent": [347, 391]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["(todo: example image)"], "extent": [391, 416]}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [416, 422], "body": [{"type": "para", "indent": 4, "text": ["This operator supports density-like scalar volumes and color fields only\n    (it doesn\u2019t compute correct results on velocity/vector and SDF fields)."], "extent": [422, 580]}, {"type": "para", "indent": 4, "text": ["Volumes will be automatically converted to VDBs."], "extent": [580, 634]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "voldeftips", "container": true, "type": "voldeftips_section", "indent": 0, "text": ["Volume Deformation Tips"], "role": "section", "extent": [634, 670], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["The original source volume has to be fully encompassed by the rest tetrahedron mesh\n  (Non-encompassed parts will be clipped away in the final deformation result)."], "extent": [670, 838]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Since the target VDB volume is built from the shape of the deformed tet mesh, it\u2019s\n  recommended to keep its source counterpart wrap the volume(s) relatively tightly.\n  If the volume contains large empty areas (e.g. clouds) it\u2019s better to have a separate\n  tet mesh for each segment, instead of having a single large one, encompassing\n  large empty areas."], "extent": [838, 1205]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1205, 1217], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Deform Geometry"], "extent": [1217, 1238], "body": [{"type": "para", "indent": 8, "text": ["Apply the deformation to regular geometry.\n        If disabled, no geometry will be output (even if the input contained any.)"], "extent": [1238, 1372]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Deform Volumes"], "extent": [1372, 1392], "body": [{"type": "para", "indent": 8, "text": ["Apply the deformation to volumes.\n        If disabled, no volumes will be output (even if the input contained any.)"], "extent": [1392, 1517]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Geometry"], "extent": [1517, 1531], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Envelope / Weight"], "extent": [1531, 1558], "body": [{"type": "para", "indent": 12, "text": ["Regular deformation weighting parameters."], "extent": [1558, 1617]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Deformer Mode"], "extent": [1617, 1640], "body": [{"type": "para", "indent": 12, "text": ["The method used for geometry deformation."], "extent": [1640, 1707]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 12, "text": ["Primitive Index + UVW"], "extent": [1707, 1742], "body": [{"type": "para", "indent": 16, "text": ["For each point, the corresponding tetrahedron and it\u2019s relative UVW coordinates\n                are computed. The geometry to be deformed has to be fully enveloped by the\n                tetramesh."], "extent": [1742, 1957]}], "container": true}, {"type": "dt", "indent": 12, "text": ["Weighted Points"], "extent": [1957, 1986], "body": [{"type": "para", "indent": 16, "text": ["For each point, deformation weights are computed for each point of the\n                corresponding tetrahedron. This method supports geometry slightly falling outside\n                the boundaries of the tetrahedron mesh."], "extent": [1986, 2240]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 8, "text": ["Generate Prim Attribs"], "extent": [2240, 2271], "body": [{"type": "para", "indent": 12, "text": ["Build primitive attributes on the source geometry required by the deformation\n            (primitive index and uvw coordinates, or point index+weight arrays, according to\n            the ", {"type": "em", "text": ["Deformer Mode"]}, " settings)."], "extent": [2271, 2510]}, {"type": "para", "indent": 12, "text": ["This can be turned off if the source geometry already has the related\n            attributes (e.g. built by another node of this type)."], "extent": [2510, 2671]}, {"type": "para", "indent": 12, "text": ["If this is turned off, no 2nd input (rest tetrahedra) is required."], "extent": [2671, 2763]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Primitive Attrib Names"], "extent": [2763, 2795], "body": [{"type": "para", "indent": 12, "text": ["Specify the primitive attribute names directly. This can be useful if\n            only the attributes has to be created but no deformation should be applied."], "extent": [2795, 2970]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Keep Prim Attribs"], "extent": [2970, 2997], "body": [{"type": "para", "indent": 12, "text": ["Don\u2019t delete the deformation primitive attributes."], "extent": [2997, 3073]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Do Deformation"], "extent": [3073, 3097], "body": [{"type": "para", "indent": 12, "text": ["Perform the deformation."], "extent": [3097, 3147]}, {"type": "note_group", "body": [{"type": "note", "indent": 12, "role": "item", "extent": [3147, 3165], "body": [{"type": "para", "indent": 16, "text": ["By turning this off, the node can be used to just generate the primitive\n                attributes, and the deformation itself could be applied later with\n                another node (either this one, or using an\n                ", {"scheme": "Node", "value": "/nodes/sop/attribinterpolate", "type": "link", "text": ["Attrib Interpolate SOP"], "fullpath": "/nodes/sop/attribinterpolate.html"}, ")."], "extent": [3165, 3483]}], "container": true}], "container": true, "role": "item_group"}, {"type": "tip_group", "body": [{"type": "tip", "indent": 12, "role": "item", "extent": [3483, 3500], "body": [{"type": "para", "indent": 16, "text": ["The deformation itself can also be applied using an\n                ", {"scheme": "Node", "value": "/nodes/sop/attribinterpolate", "type": "link", "text": ["Attrib Interpolate SOP"], "fullpath": "/nodes/sop/attribinterpolate.html"}, ",\n                if the primitive index and uvw attributes are present\n                (or point index/weight arrays, depending on the ", {"type": "em", "text": ["Deformer Mode"]}, " setting)."], "extent": [3500, 3798]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 12, "text": ["If no deformation is performed, no 3rd input (deformed tetrahedra)\n            has to be connected."], "extent": [3798, 3911]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Interpolate Attributes"], "extent": [3911, 3943], "body": [{"type": "para", "indent": 12, "text": ["A list of attributes to be inherited from the tetrahedron mesh.\n            Apart from position (", {"type": "code", "text": ["P"]}, "), other attributes can be inherited from the\n            deformed tetrahedron geometry."], "extent": [3943, 4157]}, {"type": "note_group", "body": [{"type": "note", "indent": 12, "role": "item", "extent": [4157, 4175], "body": [{"type": "para", "indent": 16, "text": ["Make sure to have ", {"type": "code", "text": ["P"]}, " (position) specified, or the deformation\n                won\u2019t work."], "extent": [4175, 4282]}], "container": true}], "container": true, "role": "item_group"}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Volume"], "extent": [4282, 4294], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Voxel Scale"], "extent": [4294, 4315], "body": [{"type": "para", "indent": 12, "text": ["If enabled, volumes will be resampled before the volume deformation\n            operation. Higher values mean lower volume resolution."], "extent": [4315, 4475]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 12, "role": "item", "extent": [4475, 4492], "body": [{"type": "para", "indent": 16, "text": ["This can be used to speed up interactive feedback\n                when dealing with volumes."], "extent": [4492, 4602]}], "container": true}], "container": true, "role": "item_group"}], "container": true}, {"type": "dt", "indent": 8, "text": ["VDB Masking"], "extent": [4602, 4623], "body": [{"type": "para", "indent": 12, "text": ["If enabled, all the VDB volumes will be ", {"type": "q", "text": ["masked"]}, " by one of the specified\n            volumes (", {"type": "em", "text": ["density"]}, " by default). It can be useful to mask out ", {"type": "q", "text": ["leftover"]}, "\n            volume data that\u2019s not required any more (e.g. color values outside\n            a density field)."], "extent": [4623, 4903]}], "container": true}], "container": true}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4903, 4912], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::polywrap_capture_ql::1", "type": "link", "text": ["PolyWrap Capture qL SOP"], "exists": true}], "extent": [4912, 4982]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::bend_ql::2", "type": "link", "text": ["Bend Deformer qL SOP"], "exists": true}], "extent": [4982, 5037]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::bias_deformer_ql::1", "type": "link", "text": ["Bias Deformer qL SOP"], "exists": true}], "extent": [5037, 5101]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::deform_pcloud_ql::1", "type": "link", "text": ["Deform by Point Cloud qL SOP"], "exists": true}], "extent": [5101, 5173]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::deformbysurface_ql::1", "type": "link", "text": ["Deform by Surface qL SOP"], "exists": true}], "extent": [5173, 5243]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::mountain_deformer_ql::1", "type": "link", "text": ["Mountain Deformer qL SOP"], "exists": true}], "extent": [5243, 5315]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::noise_ql::1", "type": "link", "text": ["Noise qL SOP"], "exists": true}], "extent": [5315, 5363]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::pointjitter_ql::1", "type": "link", "text": ["PointJitter qL SOP"], "exists": true}], "extent": [5363, 5423]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::taper_ql::1", "type": "link", "text": ["Taper Deformer qL SOP"], "exists": true}], "extent": [5423, 5480]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::twist_ql::2", "type": "link", "text": ["Twist Deformer qL SOP"], "exists": true}], "extent": [5480, 5543]}], "container": true}], "text": "Related"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [5543, 5555], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Shrinking deformations are low quality (no averaging of multiple source voxels) (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/997", "type": "link", "text": ["#997"], "exists": true}, ")"], "extent": [5555, 5690]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Should support vector (velocity) volumes (right now it\u2019s scalar/color only)"], "extent": [5690, 5772]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Could this method support SDFs?  \u2192 Nope"], "extent": [5772, 5820]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [5820, 5844], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 2"]}, " \u2014"], "extent": [5844, 5872]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2020-08-15"], "extent": [5872, 5884], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Version 2"], "extent": [5884, 5900]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Doesn\u2019t depend on unique ", {"type": "q", "text": ["name"]}, " attributes any more (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1101", "type": "link", "text": ["#1101"], "exists": true}, ")"], "extent": [5900, 6009]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Slightly improved target VDB volumes activation  \u2192 better performance"], "extent": [6009, 6088]}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [6088, 6115]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2020-03-03"], "extent": [6115, 6127], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["proxy scale"]}, " network editor indicator (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/994", "type": "link", "text": ["#994"], "exists": true}, ")"], "extent": [6127, 6228]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-03-02"], "extent": [6228, 6240], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed regular geo/volume issues (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/988", "type": "link", "text": ["#988"], "exists": true}, ")"], "extent": [6240, 6328]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-16"], "extent": [6328, 6340], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated tets volume deformation section (again) from Deform by Curve SOP"], "extent": [6340, 6419], "body": [{"type": "bullet_group", "body": [{"blevel": 8, "type": "bullet", "indent": 6, "text": ["Test and make sure it works in all scenarios"], "extent": [6419, 6473]}], "container": true}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-11"], "extent": [6473, 6485], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Should use less VDB memory while processing (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/967", "type": "link", "text": ["#967"], "exists": true}, ")"], "extent": [6485, 6584]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added VDB Masking options"], "extent": [6584, 6616]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["A bit more compact UI (can give harmless warnings for existing nodes on scene open)"], "extent": [6616, 6707]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-02-10"], "extent": [6707, 6719], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed a silly bug in volume deformation method"], "extent": [6719, 6772]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Volume deformation is now done using a single Volume Wrangle"], "extent": [6772, 6839]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Volumes are now required to have a ", {"type": "var", "text": ["name"]}, " attribute"], "extent": [6839, 6899]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Both scalar and vector (color) volumes are supported"], "extent": [6899, 6959]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2017-02-20"], "extent": [6959, 6971], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed attribute interpolations (#547)"], "extent": [6971, 7015]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added attribute menu for Weight Name"], "extent": [7015, 7059]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2017-02-20"], "extent": [7059, 7071], "body": [{"type": "para", "indent": 4, "text": ["Groups reinterpreted (work in progress):"], "extent": [7071, 7116]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Inside: points inside the tetrahedron mesh"], "extent": [7116, 7165]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Outside: points that are completely unaffected by the tet deformation"], "extent": [7165, 7242]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2017-03-05"], "extent": [7242, 7254], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added Max Dist Tolerance parameter for Primitive Index + UVW mode (#542)"], "extent": [7254, 7334]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2017-02-28"], "extent": [7334, 7346], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added new deformer mode (weighted points) (#523)"], "extent": [7346, 7401]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added inside/outside point group options (#523)"], "extent": [7401, 7456]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2016-08-05"], "extent": [7456, 7468], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["First version."], "extent": [7468, 7490]}], "container": true}], "container": true}], "container": true}]}], "title": ["Deform by Tetra qL"], "summary": ["Deforms the input geometry (including volumes) using tetrahedrons."]}