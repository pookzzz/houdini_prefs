{"type": "root", "attrs": {"icon": "SOP/volume", "context": "sop", "type": "node", "internal": "fluidsource_ql", "version": "1", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Fluid Source qL"], "extent": [45, 65]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 1"]}], "extent": [65, 89]}, {"type": "summary", "indent": 0, "text": ["An optimized variant of the original Fluid Source SOP."], "extent": [89, 151]}, {"type": "para", "indent": 0, "text": ["This is a drop-in replacement of the original ", {"scheme": "Node", "value": "/nodes/sop/fluidsource", "type": "link", "text": ["Fluid Source SOP"], "fullpath": "/nodes/sop/fluidsource.html"}, " \u2013\nmeaning that those nodes can be replaced with the ", {"type": "q", "text": ["Change Type"]}, " menu item to this node type,\nand it will produce (almost) the same results.\n(Make sure to enable ", {"type": "q", "text": ["Keep Parameters"]}, " when switching the node type.)"], "extent": [151, 451]}, {"type": "para", "indent": 0, "text": ["This operator is tested and should work in ", {"type": "em", "text": ["Source"]}, ", ", {"type": "em", "text": ["Sink"]}, ", ", {"type": "em", "text": ["Pump"]}, ", ", {"type": "em", "text": ["Collide"]}, "\nand ", {"type": "em", "text": ["Expand"]}, " modes."], "extent": [451, 551]}, {"type": "para", "indent": 0, "text": ["Certain internal optimizations are applied, the most important being ", {"type": "strong", "text": ["VDB"]}, " operators\nused for volume construction (both scalar/density and velocity)."], "extent": [551, 702]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [702, 708], "body": [{"type": "para", "indent": 4, "text": ["This is a modified version of the original Fluid Source qL SOP from Houdini version 14.0.\n    Any features added since then to the original SOP will not be present in this variant."], "extent": [708, 894]}], "container": true}], "container": true, "role": "item_group"}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [894, 899], "body": [{"type": "para", "indent": 4, "text": ["For the shelf tools to use this operator instead of the default one, issue\n    the following hscript command (before calling any of the shelf tools):"], "extent": [899, 1054]}, {"type": "para", "indent": 4, "text": [{"type": "code", "text": ["opalias Sop qLib::fluidsource_ql::1 fluidsource"]}], "extent": [1054, 1111]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [1111, 1120], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/fluidsource", "type": "link", "text": "", "fullpath": "/nodes/sop/fluidsource.html"}], "extent": [1120, 1149]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/qLib::gasresizefluiddynamic_ql::1", "type": "link", "text": ["Gas Resize Fluid Dynamic qL DOP"], "exists": true}], "extent": [1149, 1232]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::velocity_ql::1", "type": "link", "text": ["Velocity qL SOP"], "exists": true}], "extent": [1232, 1288]}], "container": true}], "text": "Related"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1288, 1300], "body": [{"type": "para", "indent": 4, "text": ["For all parameters not mentioned here, see the ", {"scheme": "Node", "value": "/nodes/sop/fluidsource", "type": "link", "text": ["Fluid Source SOP"], "fullpath": "/nodes/sop/fluidsource.html"}, " documentation."], "extent": [1300, 1407]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Enable"], "extent": [1407, 1419], "body": [{"type": "para", "indent": 8, "text": ["A global on/off switch for the node."], "extent": [1419, 1465]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [1465, 1479], "body": [{"type": "para", "indent": 12, "text": ["For certain modes (mostly SDF, e.g. collide field mode) this will\n            ", {"type": "em", "text": ["not"]}, " work, and the source has to be disabled in the DOP network."], "extent": [1479, 1636]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Activation"], "extent": [1636, 1652], "body": [{"type": "para", "indent": 8, "text": ["Same as ", {"type": "em", "text": ["Enable"]}, ", but a numeric field that can be driven by an expression."], "extent": [1652, 1736]}, {"type": "para", "indent": 8, "text": ["The default expression deactivates the source if the first scalar volume\n        has a ", {"type": "em", "text": ["Scale"]}, " of ", {"type": "code", "text": ["0"]}, "."], "extent": [1736, 1848]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Division (Voxel) Size"], "extent": [1848, 1875], "body": [{"type": "para", "indent": 8, "text": ["Global voxel size setting."], "extent": [1875, 1911]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Size Reduction (%)"], "extent": [1911, 1935], "body": [{"type": "para", "indent": 8, "text": ["A reduction percentage on voxel size. (A value of ", {"type": "code", "text": ["0.5"]}, " ", {"type": "em", "text": ["reduces"]}, " field density \u2013\n        effectively doubling the voxel size, but ", {"type": "em", "text": ["reducing the overall voxel count"]}, ".)"], "extent": [1935, 2113]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Min Size Threshold"], "extent": [2113, 2137], "body": [{"type": "para", "indent": 8, "text": ["If the generated volumes' overall bounding box size falls below this value (along any axis),\n        an empty geometry will be output instead."], "extent": [2137, 2297]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 8, "role": "item", "extent": [2297, 2310], "body": [{"type": "para", "indent": 12, "text": ["This is a workaround for geometry that generate practically empty volumes\n            (usually very small size, located around the origin) so they won\u2019t mess up\n            volume container auto-resize operations."], "extent": [2310, 2545]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Vector Volumes"], "extent": [2545, 2565], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Crop by Scalar Volume"], "extent": [2565, 2596], "body": [{"type": "para", "indent": 12, "text": ["This limits velocity field bounds to be within the scalar fields'./obj/chopperFX_2/fluidsource_ql1/switch\u2013crop.by.scalar/input"], "extent": [2596, 2737]}, {"type": "para", "indent": 12, "text": ["As velocity fields are usually scaled with a scalar (density) field when sourcing,\n            so it is both safe and more effective to limit velocity field boundaries this way."], "extent": [2737, 2928]}, {"type": "para", "indent": 12, "text": ["Disable this however, if the velocity field is needed in its entirety, independently\n            of other fields."], "extent": [2928, 3055]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Advanced Settings"], "extent": [3055, 3078], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Use Optimizations"], "extent": [3078, 3105], "body": [{"type": "para", "indent": 12, "text": ["If disabled, the original internal mechanisms (non-VDB) will be used.\n            Can be useful for backwards-compatibility testing."], "extent": [3105, 3251]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Scalar Vol. Tolerance"], "extent": [3251, 3282], "body": [{"type": "para", "indent": 12, "text": ["Scalar field values below will be considered zero, and the volumes are\n            auto-cropped accordingly. This can be adjusted to get tighter volume bounds\n            when generating soft-edged volumes."], "extent": [3282, 3502]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Show Guides"], "extent": [3502, 3519], "body": [{"type": "para", "indent": 8, "text": ["Display guide geometry."], "extent": [3519, 3552]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [3552, 3566], "body": [{"type": "para", "indent": 12, "text": ["This operator displays velocity fields as guide geometry\n            (so they are only built for display and won\u2019t affect simulation times)."], "extent": [3566, 3721]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"type": "para", "indent": 0, "text": ["\u2014"], "extent": [3721, 3726]}, {"level": 1, "id": "knownbugs", "container": true, "type": "knownbugs_section", "indent": 0, "text": ["Known incompatibilities"], "role": "section", "extent": [3726, 3761], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Scalar Volumes"], "extent": [3761, 3779], "body": [{"type": "bullet_group", "body": [{"blevel": 4, "type": "bullet", "indent": 2, "text": ["SDF From Volume"], "extent": [3779, 3799], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "q", "text": ["Minimum Distance"]}, " doesn\u2019t work (use ", {"type": "q", "text": ["Empty Interior"]}, " instead)"], "extent": [3799, 3868]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [3868, 3880]}], "container": true}], "container": true}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": ["Known issues:"], "extent": [3880, 3895]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["Scalar Volumes"], "extent": [3895, 3912], "body": [{"type": "bullet_group", "body": [{"blevel": 4, "type": "bullet", "indent": 2, "text": ["Fill Interior has to be enabled on vdbfrompolygons if ", {"type": "q", "text": ["Empty Interior"]}, "\n    is used with Edge Thickness/In Feather Length\n    (or artifacts can appear, esp. with small voxel sizes)"], "extent": [3912, 4098]}], "container": true}], "container": true}], "container": true}]}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [4098, 4110], "body": [{"type": "para", "indent": 0, "text": ["Goals:"], "extent": [4110, 4118]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["refactor it to get rid of all bottlenecks and any unnecessary complexity"], "extent": [4118, 4193]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["VDB-ize it as much as possible"], "extent": [4193, 4226]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["full parameter compatibility with the original (it should be 100% swappable)"], "extent": [4226, 4307]}], "container": true}, {"type": "para", "indent": 0, "text": ["\u2014"], "extent": [4307, 4312]}, {"type": "para", "indent": 0, "text": ["Particulars:"], "extent": [4312, 4326]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"type": "q", "text": ["Scale By Source Attribute"]}, " \u2013"], "extent": [4326, 4359], "body": [{"type": "bullet_group", "body": [{"blevel": 4, "type": "bullet", "indent": 2, "text": ["The internal node volumefromattrib_extrap should be removed (slow),\n    and a pointcloud-based volume multiplier should be implemented.\n    (DONE \u2013 marginal gain, still a bottleneck)"], "extent": [4359, 4548]}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Implement/add ", {"type": "q", "text": ["Velocity Vol Tolerance"]}, " parameter"], "extent": [4548, 4600]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Motion Blur"], "extent": [4600, 4614], "body": [{"type": "bullet_group", "body": [{"blevel": 4, "type": "bullet", "indent": 2, "text": ["is ", {"type": "em", "text": ["very"]}, " slow, should be optimized"], "extent": [4614, 4654]}, {"blevel": 4, "type": "bullet", "indent": 2, "text": ["should support automatic object-level motion detection\n    (just like velocity volumes/object motion)"], "extent": [4654, 4761]}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Scalar ", {"type": "q", "text": ["slice"]}, " vis mode should also be displayed as a guide\n  (but hopefully it\u2019s not as slow as velocity trails)"], "extent": [4761, 4880]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [4880, 4904], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2024-02-13"], "extent": [4904, 4917], "body": [{"type": "para", "indent": 4, "text": ["TAB Menu location update (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1404", "type": "link", "text": ["#1404"], "exists": true}, ")"], "extent": [4917, 4998]}], "container": true}, {"type": "dt", "indent": 0, "text": ["2019-11-13"], "extent": [4998, 5010], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Updated attribute popup menu(s) to use shared menu python code (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/899", "type": "link", "text": ["#899"], "exists": true}, ")"], "extent": [5010, 5129]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2016-07-24"], "extent": [5129, 5141], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added note about the node originated from H14"], "extent": [5141, 5194]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2016-07-14"], "extent": [5194, 5206], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added popup menu presets to link VDB-from-points radius scales to voxel radius scales"], "extent": [5206, 5298]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["Fill Interior"]}, " for vector VDB-from-polygons mode"], "extent": [5298, 5361]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2016-01-18"], "extent": [5361, 5373], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added Min Size Threshold option (", {"type": "q", "text": ["practically empty"]}, " volume workaround)"], "extent": [5373, 5452]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2015-01-11"], "extent": [5452, 5464], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["RGB Smoke"]}, " visualization mode for velocity volumes\n      (colored smoke support)"], "extent": [5464, 5558]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Renamed Velocity Volumes tab to Vector Volumes"], "extent": [5558, 5612]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2015-01-04"], "extent": [5612, 5624], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "em", "text": ["Velocity qL SOP"]}, " reference to help page"], "extent": [5624, 5677]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["automatic"]}, " voxel min radius expressions\n      for VDB-From-Points modes (both scalar and velocity)"], "extent": [5677, 5790]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-22"], "extent": [5790, 5802], "body": [{"type": "para", "indent": 4, "text": ["More options for reducing overall voxel counts:"], "extent": [5802, 5854]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Published ", {"type": "q", "text": ["Scalar Vol Tolerance"]}, " parameter (also increased the default value).\n      This can be used to generate more ", {"type": "q", "text": ["tight"]}, " scalar fields, which can be useful\n      (i.e. faster) in higher resolutions."], "extent": [5854, 6065]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["Crop by Scalar Volume"]}, " to Velocity Volumes tab (see above)"], "extent": [6065, 6138]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-15"], "extent": [6138, 6150], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added ", {"type": "q", "text": ["Activation"]}, " parameter"], "extent": [6150, 6185]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "em", "text": ["Scale by Source Attribute"]}, " is now VDB-based for scalar volumes'"], "extent": [6185, 6256], "body": [{"type": "bullet_group", "body": [{"blevel": 8, "type": "bullet", "indent": 6, "text": [{"type": "q", "text": ["SDF From Geometry"]}, " mode"], "extent": [6256, 6289]}, {"blevel": 8, "type": "bullet", "indent": 6, "text": [{"type": "q", "text": ["VDB From Points"]}, " mode (too slow!)"], "extent": [6289, 6333]}], "container": true}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-02"], "extent": [6333, 6345], "body": [{"type": "para", "indent": 4, "text": ["UI reorganization:"], "extent": [6345, 6368]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "q", "text": ["Container Settings"]}, " is called ", {"type": "q", "text": ["Advanced Settings"]}, ",\n      Particles and Partitioning toggles were moved here,\n      and their tabs are hidden if disabled"], "extent": [6368, 6528]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Various other controls are set to hidden-if-disabled\n      to reduce UI clutter"], "extent": [6528, 6615]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-11-13"], "extent": [6615, 6627], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Bug fix: empty input geo will result in an empty output geometry\n      (instead of a single-voxel volume at the origin)."], "extent": [6627, 6755]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-10-29"], "extent": [6755, 6767], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Velocity field guides were shown for disabled fields \u2013 fixed."], "extent": [6767, 6836]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Scalar fields: added per-field smoke visualization density parameter"], "extent": [6836, 6911]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Scalar fields: added ", {"type": "q", "text": ["VDB From Points"]}, " method"], "extent": [6911, 6964]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-10-21"], "extent": [6964, 6976], "body": [{"type": "para", "indent": 4, "text": ["Rearranged ", {"type": "em", "text": ["Division Size"]}, " parameters, so there\u2019s\u2026"], "extent": [6976, 7033]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["a single overall size parameter (", {"type": "em", "text": ["Division (Voxel) Size"]}, ")"], "extent": [7033, 7097]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["an overall size reduction parameter"], "extent": [7097, 7139]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["additional size reduction params for both scalar and vector fields"], "extent": [7139, 7213]}], "container": true}, {"type": "para", "indent": 4, "text": ["Field generation \u2013"], "extent": [7213, 7237]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["there\u2019s an additional ", {"type": "q", "text": ["enabled"]}, " switch for each field"], "extent": [7237, 7298]}], "container": true}, {"type": "para", "indent": 4, "text": ["Added ", {"type": "q", "text": ["VDB From Points"]}, " to vel field generation"], "extent": [7298, 7351]}, {"type": "para", "indent": 4, "text": ["Velocity field visualization changes \u2013"], "extent": [7351, 7395]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "q", "text": ["smoke"]}, " is switched to rainbow"], "extent": [7395, 7432]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"type": "q", "text": ["streamers"]}, " are now displayed as guide geometry\n      (this won\u2019t slow down emitter generation if streamer visualization\n      is forgotten as enabled)"], "extent": [7432, 7590]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["NOTE: streamer guide generation is now slower than necessary,\n      this should be fixed"], "extent": [7590, 7687]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-10-19"], "extent": [7687, 7699], "body": [{"type": "para", "indent": 4, "text": ["Started working on first version."], "extent": [7699, 7738]}], "container": true}], "container": true}]}], "title": ["Fluid Source qL"], "summary": ["An optimized variant of the original Fluid Source SOP."]}