{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "labs::mapbox_postprocess::1.0", "icon": "SOP/labs::mapbox_postprocess::1.0", "since": "19.5", "version": "1.0", "namespace": "labs"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Labs Mapbox Post-process"], "extent": [134, 163]}, {"type": "summary", "indent": 0, "text": ["Processes contiguous terrain tiles generated by ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, "."], "extent": [163, 239]}, {"type": "para", "indent": 0, "text": ["This node works on a contiguous group of terrain tiles generated by ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, ". It provides post-processing features decoupled from ", {"type": "em", "text": ["Lab Mapbox SOP"]}, ", either because they are impossible to accomplish on individual terrain tiles, or because they offer more flexibility and better performance when moved to a separate node."], "extent": [239, 569]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Seamless Normals"], "extent": [569, 592], "body": [{"type": "para", "indent": 0, "text": ["For both heightfield tiling and mesh tiling, it is impossible to make normals seamless with ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, " alone, because normals are inherently inconsistent between two sides of unfused borders. However, this node can make normals seamless because it can process all the tiles at once."], "extent": [592, 885]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["HeightField Tiles"], "extent": [885, 911], "body": [{"type": "para", "indent": 0, "text": ["Connect all heightfield tiles to a ", {"type": "em", "text": ["Merge SOP"]}, " and connect the ", {"type": "em", "text": ["Merge SOP"]}, " to this node\u2019s first input."], "extent": [911, 1016]}, {"type": "para", "indent": 0, "text": ["The seamless heightfield tiles generated by upstream ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, " are indeed seamless in terms of the height values stored in the voxels. In other words, if you convert the heightfield tiles to mesh tiles, the mesh point positions will be seamless."], "extent": [1016, 1272]}, {"type": "para", "indent": 0, "text": ["The heightfield tiles only appear to have seams in terms of shading. To completely remove any visible seams, turn on ", {"type": "ui", "text": ["HeightField Tiles"]}, " > ", {"type": "ui", "text": ["Fuse HeightField Tiles"]}, ". This will fuse all the tiles into a single large heightfield."], "extent": [1272, 1504]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1504, 1510], "body": [{"type": "para", "indent": 4, "text": ["On jagged terrains, fusing the tiles occasionally introduces small shading differences compared to the original unfused tiles."], "extent": [1510, 1642]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Mesh Tiles"], "extent": [1642, 1661], "body": [{"type": "para", "indent": 0, "text": ["Connect all mesh tiles to a ", {"type": "em", "text": ["Merge SOP"]}, " and connect the ", {"type": "em", "text": ["Merge SOP"]}, " to this node\u2019s second input."], "extent": [1661, 1760]}, {"type": "para", "indent": 0, "text": ["The seamless mesh tiles generated by upstream ", {"type": "ui", "text": ["Labs Mapbox SOPs"]}, " are seamless in terms of point positions, colors, and materials, but not in terms of point normals. To fix that, turn on ", {"type": "ui", "text": ["Mesh Tiles"]}, " > ", {"type": "ui", "text": ["Make Border Normals Seamless"]}, ". This will make matched border points from adjacent tiles share a common normal value that is their average normal, thereby eliminating normal seams along the tile borders."], "extent": [1760, 2172]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [2172, 2177], "body": [{"type": "para", "indent": 4, "text": ["Unlike fusing heightfield tiles, there are no side effects to making border normals seamless on mesh tiles."], "extent": [2177, 2291]}], "container": true}], "container": true, "role": "item_group"}]}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2291, 2303], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["HeightField Tiles"], "extent": [2303, 2332], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Fuse HeightField Tiles"], "extent": [2332, 2361], "body": [{"type": "para", "indent": 8, "text": ["Fuses all input heightfield tiles into a single large heightfield, removing any visible seams along the original tile borders.\n        ", {"tag": "p", "attrs": {}, "type": "xml", "text": ["If the heightfield output has no geometry when this is on, it is most likely because the input tiles do not all have the same resolution; please make sure that they do."]}], "extent": [2386, 2714]}], "container": true, "attrs": {"id": "fusehftiles"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Keep Original Tiles"], "extent": [2714, 2739], "body": [{"type": "para", "indent": 8, "text": ["Outputs the original unfused tiles, together with the single large tile."], "extent": [2761, 2851]}], "container": true, "attrs": {"id": "keeporig"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Resample Output Tiles"], "extent": [2851, 2878], "body": [{"type": "para", "indent": 8, "text": ["Resamples the output terrain tiles."], "extent": [2902, 2955]}], "container": true, "attrs": {"id": "resamplehf"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Resample"], "extent": [2955, 2976], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Grid Samples"], "extent": [2976, 2995], "body": [{"type": "para", "indent": 8, "text": ["If ", {"type": "ui", "text": ["Fuse HeightField Tiles"]}, " is on, this sets the resolution for the single large tile.\n        ", {"tag": "p", "attrs": {}, "type": "xml", "text": ["If any original tiles are present, they are also resampled to this resolution, meaning they will be denser than the single large tile."]}], "extent": [3020, 3276]}], "container": true, "attrs": {"id": "gridsamples"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Resample Filter"], "extent": [3276, 3297], "body": [{"type": "para", "indent": 8, "text": ["The 2D filter to use to interpolate the resampled values. Different filters might give various blurring or sharpening effects in the output."], "extent": [3317, 3475]}], "container": true, "attrs": {"id": "filter"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Filter Scale"], "extent": [3475, 3493], "body": [{"type": "para", "indent": 8, "text": ["How much effect the filter will have on the output. High values can give more blurring, depending on the filter type."], "extent": [3520, 3655]}], "container": true, "attrs": {"id": "filterscale  "}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Mesh Tiles"], "extent": [3655, 3676], "body": [{"level": 3, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Input"], "extent": [3676, 3695], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Border Point Group"], "extent": [3695, 3720], "body": [{"type": "para", "indent": 8, "text": ["The name of the input point group that contains all the border points. By default, this group is created by upstream ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, ". This is used to speed up computation by limiting it to only border points."], "extent": [3747, 3976]}], "container": true, "attrs": {"id": "borderptgroup"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Output"], "extent": [3976, 3995], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Make Border Normals Seamless"], "extent": [3995, 4030], "body": [{"type": "para", "indent": 8, "text": ["Eliminates normal seams along the tile borders by making matched border points from adjacent tiles share a common normal value that is their average normal."], "extent": [4057, 4231]}], "container": true, "attrs": {"id": "fixbordernorm"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Distance Tolerance"], "extent": [4231, 4255], "body": [{"type": "para", "indent": 8, "text": ["A distance tolerance for matching border points from adjacent tiles. Higher values are more tolerant to tiny numerical errors."], "extent": [4277, 4421]}], "container": true, "attrs": {"id": "seamdist"}, "role": "item"}], "container": true, "role": "item_group"}]}]}], "text": "Parameters"}, {"level": 1, "id": "examples", "container": true, "type": "examples_section", "indent": 0, "role": "section", "extent": [4421, 4431], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": null, "value": "https://github.com/sideeffects/SideFXLabs/blob/Development/hip/examples/mapbox/mapbox.3.0.hip", "type": "link", "text": ["Example File"], "exists": true}], "extent": [4431, 4546]}], "container": true}], "text": "Examples"}], "title": ["Labs Mapbox Post-process"], "summary": ["Processes contiguous terrain tiles generated by ", {"type": "em", "text": ["Labs Mapbox SOPs"]}, "."]}