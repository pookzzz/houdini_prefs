{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "labs::kelvin_wakes_deformer::1.0", "icon": "SOP/labs::kelvin_wakes_deformer::1.0", "since": "19.5", "version": "1.0", "namespace": "labs"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Kelvin Wakes Deformer"], "extent": [140, 166]}, {"type": "summary", "indent": 0, "text": ["Deforms input geometry in the shape of water wakes that form behind objects\nmoving at a constant speed."], "extent": [166, 278]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/kelvin_wakes_deformer.png", "type": "img", "text": ""}], "extent": [278, 321]}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["Kelvin wakes"]}, " refer to the steady-state wave patterns that develop behind\nobjects moving on water at a constant speed. Shapes of these wakes do not\nchange, but they are dragged continually by motion of the floating body. This\nnode generates such wakes; it can be used to cheaply emulate waves from a ship\nor ripple patterns that emerge behind floating characters."], "extent": [321, 687]}, {"type": "para", "indent": 0, "text": ["First input to this SOP is the geometry that will be deformed. The\n", {"type": "ui", "text": ["Deformation Target"]}, " parameter must be set according to the type of this\ninput: ", {"type": "ui", "text": ["Points"]}, " or ", {"type": "ui", "text": ["Heightfield"]}, ". In either case, deformation is done in the\nplane perpendicular to ", {"type": "ui", "text": ["Up Axis"]}, "."], "extent": [687, 947]}, {"type": "para", "indent": 0, "text": ["Second input to the Kelvin Wakes Deformer SOP must contain the objects that\ngenerate the wakes. When ", {"type": "ui", "text": ["Input"]}, " is set to ", {"type": "ui", "text": ["Objects as Points"]}, ", points of\nthis geometry each represent a floating body whose constant velocity is expected\nin the ", {"type": "code", "text": ["v"]}, " attribute. For a turning object, the path must be converted to a\ncurve and ", {"type": "ui", "text": ["Input"]}, " set to ", {"type": "ui", "text": ["Trajectory Curve"]}, ". In this mode, only a single\ncurve is accepted at a time\u2013but wakes from more objects can be added by\nchaining multiple nodes."], "extent": [947, 1434]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [1434, 1440], "body": [{"type": "para", "indent": 4, "text": ["Although this node produces correct results for gentler turns, it may have\n    trouble at higher curvatures or when different parts of the curve are in\n    close proximity."], "extent": [1440, 1619]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1619, 1631], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Up Axis"], "extent": [1631, 1645], "body": [{"type": "para", "indent": 8, "text": ["Deformation is done in the plane perpendicular to this axis. That is,\n        coordinates of each point are projected to this plane before the\n        deformation function is calculated."], "extent": [1665, 1869]}], "container": true, "attrs": {"id": "normal"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Gravity"], "extent": [1869, 1882], "body": [{"type": "para", "indent": 8, "text": ["Acceleration due to gravity. Larger values of ", {"type": "ui", "text": ["Gravity"]}, " result in less\n        deformation and smaller wavelengths for the generated waves."], "extent": [1903, 2062]}], "container": true, "attrs": {"id": "gravity"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Deformation Target"], "extent": [2062, 2086], "body": [{"type": "para", "indent": 8, "text": ["Type of geometry to deform. The value of this parameter must correspond\n        to the type of the first input."], "extent": [2106, 2227]}], "container": true, "attrs": {"id": "target"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Input"], "extent": [2227, 2238], "body": [{"type": "para", "indent": 8, "text": ["Specifies type of the second input. When set to ", {"type": "ui", "text": ["Objects as Points"]}, ",\n        each point will generate a wake behind it based on its velocity (stored\n        in the ", {"type": "code", "text": ["v"]}, " attribute). When set to ", {"type": "ui", "text": ["Trajectory Curve"]}, ", a single curve\n        is expected representing the object\u2019s path."], "extent": [2257, 2549]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [2549, 2563], "body": [{"type": "para", "indent": 12, "text": ["The curve is linearly extrapolated beyond its endpoints. That is,\n            the object is assumed to move in a straight line before reaching the\n            curve (before ", {"type": "ui", "text": ["Curve Start Frame"]}, ") and after hitting its end."], "extent": [2563, 2807]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "input"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Curve Start Frame"], "extent": [2807, 2830], "body": [{"type": "para", "indent": 8, "text": ["When ", {"type": "ui", "text": ["Input"]}, " is set to ", {"type": "ui", "text": ["Trajectory Curve"]}, ", the object will reach the\n        beginning of the curve at this frame."], "extent": [2854, 2990]}], "container": true, "attrs": {"id": "curvestart"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Traversal Speed"], "extent": [2990, 3011], "body": [{"type": "para", "indent": 8, "text": ["Speed at which the object traverses its path. With a larger\n        ", {"type": "ui", "text": ["Traversal Speed"]}, ", the object will move along the curve faster and\n        generate waves of longer wavelength."], "extent": [3030, 3221]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [3221, 3235], "body": [{"type": "para", "indent": 12, "text": ["This operator works with the assumption that objects move with a\n            constant speed; thus, this parameter cannot be animated."], "extent": [3235, 3390]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "speed"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Supersample"], "extent": [3390, 3407], "body": [{"type": "para", "indent": 8, "text": ["Distance calculations may be blocky near turns, and supersampling can\n        help to mitigate this. Turn this feature on if you notice blockiness in\n        the pattern. The distance should be set large enough to smooth out the\n        problematic areas, but small enough to avoid larger scale distortion."], "extent": [3435, 3759]}], "container": true, "attrs": {"id": "supersample_dx"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Falloffs"], "extent": [3759, 3778], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Edge Blend"], "extent": [3778, 3795], "body": [{"type": "para", "indent": 8, "text": ["The amount of flattening near outer edges of the wake. Larger values\n        perform more gradual blending, but may deteriorate the internal pattern."], "extent": [3818, 3985]}], "container": true, "attrs": {"id": "edgeblend"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Suppress Radius"], "extent": [3985, 4006], "body": [{"type": "para", "indent": 8, "text": ["The amount of flattening near the generating body. This is required to\n        remove unphysical spikes close to the object."], "extent": [4035, 4177]}], "container": true, "attrs": {"id": "suppress_radius"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Attenuate by Distance"], "extent": [4177, 4204], "body": [{"type": "para", "indent": 8, "text": ["When enabled, heights of waves farther from the generating object are\n        reduced."], "extent": [4232, 4336]}], "container": true, "attrs": {"id": "enable_falloff"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Falloff Range is Relative to Speed"], "extent": [4336, 4376], "body": [{"type": "para", "indent": 8, "text": ["When this is turned on (along with ", {"type": "ui", "text": ["Attenuate by Distance"]}, "), values in\n        the ", {"type": "ui", "text": ["Falloff Range"]}, " will be relative to the object\u2019s speed; that is,\n        bodies that are moving faster will have longer wakes. If\n        ", {"type": "ui", "text": ["Falloff Range is Relative to Speed"]}, " is disabled, values in the\n        ", {"type": "ui", "text": ["Falloff Range"]}, " represent absolute distances."], "extent": [4406, 4770]}], "container": true, "attrs": {"id": "relative_falloff"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Falloff Range"], "extent": [4770, 4789], "body": [{"type": "para", "indent": 8, "text": ["Controls the distance at which the disturbances behind the boat are\n        attenuated, when ", {"type": "ui", "text": ["Attenuate by Distance"]}, " is turned on."], "extent": [4816, 4966]}], "container": true, "attrs": {"id": "falloff_range"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Spectrum"], "extent": [4966, 4985], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Magnitude Multiplier"], "extent": [4985, 5012], "body": [{"type": "para", "indent": 8, "text": ["Controls the overall amplitude of the wakes."], "extent": [5046, 5108]}], "container": true, "attrs": {"id": "magnitude_multiplier"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Magnitude Ramp"], "extent": [5108, 5128], "body": [{"type": "para", "indent": 8, "text": ["Determines magnitudes of the wave coefficients at each angle. Values\n        near the middle and endpoints of this ramp control ", {"type": "em", "text": ["transverse"]}, " and\n        ", {"type": "em", "text": ["divergent"]}, " components, respectively. ", {"type": "em", "text": ["Transverse"]}, " waves face in the\n        same direction as the object, while ", {"type": "em", "text": ["divergent"]}, " components are\n        responsible for the patterns that emerge near wake edges. Left and right\n        sides of this ramp correspond to the respective sides of the wake."], "extent": [5156, 5622]}], "container": true, "attrs": {"id": "magnitude_ramp"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Phase Offset"], "extent": [5622, 5640], "body": [{"type": "para", "indent": 8, "text": ["A global phase offset for the wave coefficients. Changing this value \n        will shift the wake pattern without changing the shape."], "extent": [5666, 5817]}], "container": true, "attrs": {"id": "phase_offset"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Phase Ramp"], "extent": [5817, 5833], "body": [{"type": "para", "indent": 8, "text": ["Determines phases of the wave coefficients at each angle. You can use\n        this ramp to tweak the look of the waves without affecting the overall\n        shape. Left and right sides of this ramp correspond to the respective\n        sides of the wake."], "extent": [5857, 6120]}], "container": true, "attrs": {"id": "phase_ramp"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 4, "text": ["Output"], "extent": [6120, 6137], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Displacement"], "extent": [6137, 6163], "body": [{"type": "para", "indent": 8, "text": ["When enabled, the specified point attribute will store the amount of\n        displacement at each point. Only available when ", {"type": "ui", "text": ["Deformation Target"]}, "\n        is set to ", {"type": "ui", "text": ["Points"]}, "."], "extent": [6193, 6380]}], "container": true, "attrs": {"id": "outputdispattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Deformation Mask"], "extent": [6380, 6402], "body": [{"type": "para", "indent": 8, "text": ["When enabled, the specified point attribute will store the mask applied\n        at each point. This mask is calculated using parameters under the\n        ", {"type": "ui", "text": ["Falloffs"]}, " section. Only available when ", {"type": "ui", "text": ["Deformation Target"]}, " is set\n        to ", {"type": "ui", "text": ["Points"]}, ". When ", {"type": "ui", "text": ["Input"]}, " is ", {"type": "ui", "text": ["Objects as Points"]}, ", the exported\n        value corresponds to the mask from the closest object."], "extent": [6432, 6807]}], "container": true, "attrs": {"id": "outputmaskattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Local Coordinates"], "extent": [6807, 6830], "body": [{"type": "para", "indent": 8, "text": ["When enabled, the specified point attribute will store the\n        two-dimensional local coordinate of each point with respect to the\n        floating body. First coordinate is aligned with motion of the object,\n        while the second is perpendicular. Only available when\n        ", {"type": "ui", "text": ["Deformation Target"]}, " is set to ", {"type": "ui", "text": ["Points"]}, ". When ", {"type": "ui", "text": ["Input"]}, " is\n        ", {"type": "ui", "text": ["Objects as Points"]}, ", the exported value corresponds to coordinates in\n        the frame of the closest object."], "extent": [6861, 7337]}], "container": true, "attrs": {"id": "outputcoordattrib"}, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Height Layer"], "extent": [7337, 7355], "body": [{"type": "para", "indent": 8, "text": ["Name of the layer to adjust when ", {"type": "ui", "text": ["Deformation Target"]}, " is set to\n        ", {"type": "ui", "text": ["Heightfield"]}, "."], "extent": [7380, 7479]}], "container": true, "attrs": {"id": "heightlayer"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["Kelvin Wakes Deformer"], "summary": ["Deforms input geometry in the shape of water wakes that form behind objects\nmoving at a constant speed."]}