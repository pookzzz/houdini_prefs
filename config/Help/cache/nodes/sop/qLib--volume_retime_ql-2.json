{"type": "root", "attrs": {"icon": "SOP/volumevelocity", "context": "sop", "type": "node", "internal": "volume_retime_ql", "version": "2", "namespace": "qLib"}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Volume Retime qL"], "extent": [53, 74]}, {"type": "para", "indent": 0, "text": [{"type": "strong", "text": ["interface version 2"]}], "extent": [74, 98]}, {"type": "summary", "indent": 0, "text": ["Evaluates an already-simulated volumetric at any subframe, using velocity-based advection."], "extent": [98, 196]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [196, 202], "body": [{"type": "para", "indent": 4, "text": ["This node is retained for Houdini 16.5 or older. For 17.0 or higher, it\u2019s recommended to use\n    the built-in Retime SOP, which gives similar results but much faster."], "extent": [202, 374]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["This operator uses DOP-network advection microsolvers to generate in-between subframes\nfrom the actual frames of volumetric simulation results.\nThis allows arbitrary retiming of simulations (including slow-motion)."], "extent": [374, 591]}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [591, 597], "body": [{"type": "para", "indent": 4, "text": ["This operator requires named volume fields (i.e. an unique ", {"type": "code", "text": ["name"]}, " string attribute\n    assigned to each volume primitive) and a velocity vector field (called ", {"type": "code", "text": ["vel"]}, " by default)."], "extent": [597, 783]}, {"type": "para", "indent": 4, "text": ["Only scalar fields are retimed, vector (color) fields has to be split into separate\n    xyz (rgb) fields."], "extent": [783, 894]}], "container": true}], "container": true, "role": "item_group"}, {"level": 1, "id": "Inputs", "container": true, "type": "Inputs_section", "indent": 0, "role": "section", "extent": [894, 902], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Input Volumes"], "extent": [902, 921], "body": [{"type": "para", "indent": 8, "text": ["Connect a geometry consisting of volumetric primitives\n        (with name attributes).\n        A velocity field (called ", {"type": "code", "text": ["vel"]}, ") is required."], "extent": [921, 1070]}, {"type": "para", "indent": 8, "text": ["All other fields except velocity will be processed."], "extent": [1070, 1131]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Source Mask(s)"], "extent": [1131, 1151], "body": [{"type": "para", "indent": 8, "text": ["(not implemented yet)\n        Connect source volume(s) here to compensate for any advection\n        artifacts appearing at emission areas."], "extent": [1151, 1300]}], "container": true}], "container": true}], "text": "Inputs"}, {"level": 1, "id": "Parameters", "container": true, "type": "Parameters_section", "indent": 0, "role": "section", "extent": [1300, 1312], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Frame"], "extent": [1312, 1323], "body": [{"type": "para", "indent": 8, "text": ["The frame number to evaluate the input volumes for.\n        It can be a fractional frame number \u2013 in that case, all volumes\n        will be reconstructed using the two nearest whole frames'\n        volumes (using their velocity fields and advection)."], "extent": [1323, 1584]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Frame Range Clamp"], "extent": [1584, 1607], "body": [{"type": "para", "indent": 8, "text": ["Clamps the input frame to the specified range (as in ", {"scheme": "Node", "value": "/nodes/sop/timeshift", "type": "link", "text": ["TimeShift SOP"], "fullpath": "/nodes/sop/timeshift.html"}, ")."], "extent": [1607, 1706]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Mode"], "extent": [1706, 1716], "body": [{"type": "para", "indent": 8, "text": ["The various modes available for volume motion retiming."], "extent": [1716, 1781]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Nearest Frame"], "extent": [1781, 1804], "body": [{"type": "para", "indent": 12, "text": ["The nearest integer frame is returned. There is no volume processing of\n            any kind. (This can be used for rough ", {"type": "q", "text": ["blocking"]}, " previews of the retiming animation.)"], "extent": [1804, 1987]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Velocity Advection"], "extent": [1987, 2015], "body": [{"type": "para", "indent": 12, "text": ["Proper advection, with the two nearest frames and the velocity field\n            are used to compute the results."], "extent": [2015, 2142]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["Velocity Field Name"], "extent": [2142, 2167], "body": [{"type": "para", "indent": 8, "text": ["Name of the velocity field (usually ", {"type": "code", "text": ["vel"]}, ")."], "extent": [2167, 2228]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Advection Method, CFL Condition"], "extent": [2228, 2265], "body": [{"type": "para", "indent": 8, "text": ["For a description, see the ", {"scheme": "Node", "value": "/nodes/vop/advectbyvolumes", "type": "link", "text": ["Advect by Volumes VOP help page"], "fullpath": "/nodes/vop/advectbyvolumes.html"}, "."], "extent": [2265, 2373]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Velocity Mult"], "extent": [2373, 2392], "body": [{"type": "para", "indent": 8, "text": ["A multiplier on all velocity field values (applied before advection)."], "extent": [2392, 2471]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Output Velocity Field"], "extent": [2471, 2498], "body": [{"type": "para", "indent": 8, "text": ["If enabled, an interpolated velocity field will be generated.\n        With large volume data and slow-motion retiming (i.e. without any perceptible\n        motion) the velocity field might not be needed."], "extent": [2498, 2719]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Vel Field Scale"], "extent": [2719, 2740], "body": [{"type": "para", "indent": 8, "text": ["Scaling of the output velocity field."], "extent": [2740, 2787]}, {"type": "para", "indent": 8, "text": ["Especially if the volume is retimed heavily, the velocity field\n        has to be scaled accordingly, or the amount of motion blur will\n        be incorrect."], "extent": [2787, 2954]}, {"type": "para", "indent": 8, "text": ["Various presets are provided for convenience:"], "extent": [2954, 3009]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["Default (1.0)"], "extent": [3009, 3032], "body": [{"type": "para", "indent": 12, "text": ["No scaling of the velocity field."], "extent": [3032, 3079]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Compute from ", {"type": "q", "text": ["Frame"]}, " (default)"], "extent": [3079, 3119], "body": [{"type": "para", "indent": 12, "text": ["An expression that calculates the amount of scaling from\n            the ", {"type": "em", "text": ["Frame"]}, " parameter\u2019s value change from the current frame to the next."], "extent": [3119, 3274]}, {"type": "para", "indent": 12, "text": ["The ", {"type": "em", "text": ["Frame"]}, " parameter has to be animated (keyframes or CHOPs),\n            otherwise the expression returns ", {"type": "code", "text": ["0"]}, "."], "extent": [3274, 3400]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Compute (limited max value)"], "extent": [3400, 3437], "body": [{"type": "para", "indent": 12, "text": ["Same as the above, but the expression has an upper limit of ", {"type": "code", "text": ["1.0"]}, "."], "extent": [3437, 3529]}], "container": true}], "container": true}], "container": true}, {"type": "dt", "indent": 4, "text": ["Output Velocity Mult"], "extent": [3529, 3555], "body": [{"type": "para", "indent": 8, "text": ["An additional multiplier on the output velocity field."], "extent": [3555, 3621]}], "container": true}], "container": true}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3621, 3630], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/qLib::volume_flatten_ql::1", "type": "link", "text": ["Volume Flatten qL SOP"], "exists": true}], "extent": [3630, 3696]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["\u2026"], "extent": [3696, 3708]}], "container": true}], "text": "Related"}, {"level": 1, "id": "limitations", "container": true, "type": "limitations_section", "indent": 0, "role": "section", "extent": [3708, 3721], "body": [{"type": "para", "indent": 4, "text": ["The two fields of the ", {"type": "em", "text": ["Start/End Frame"]}, " parameter pair cannot be disabled\n    individually, so they can\u2019t accurately reflect the state of the clamp mode."], "extent": [3721, 3880]}, {"type": "para", "indent": 4, "text": ["This is an UI limitation and doesn\u2019t affect functionality.\n    (Using the dual-field is a conscious decision \u2013 this allows copying range\n    expressions with a single copy/paste action.)"], "extent": [3880, 4074]}], "text": "Limitations"}, {"level": 1, "id": "todo", "container": true, "type": "todo_section", "indent": 0, "text": ["To Do"], "role": "section", "extent": [4074, 4086], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Implement 2nd input (source volume mask)"], "extent": [4086, 4133]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Specify field name(s) to process? (maybe not that important)"], "extent": [4133, 4200]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Should also be able to ", {"type": "em", "text": ["directional blur"]}, " (", {"type": "q", "text": ["smear"]}, ") with the vel field? (fake motion blur)"], "extent": [4200, 4300]}], "container": true}]}, {"level": 1, "id": "relnotes", "container": true, "type": "relnotes_section", "indent": 0, "text": ["Release Notes"], "role": "section", "extent": [4300, 4324], "body": [{"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 2"]}, " \u2014"], "extent": [4324, 4352]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2020-11-14"], "extent": [4352, 4364], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["OCD alert: removed color from output knob (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1168", "type": "link", "text": ["#1168"], "exists": true}, ")"], "extent": [4364, 4464]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2020-06-24"], "extent": [4464, 4476], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added note that it\u2019s obsolete for H17.0+ (", {"scheme": null, "value": "https://github.com/qLab/qLib/issues/1071", "type": "link", "text": ["#1071"], "exists": true}, ")"], "extent": [4476, 4575]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2019-02-14"], "extent": [4575, 4587], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added timescale internally (needs more testing)"], "extent": [4587, 4642]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2017-06-08"], "extent": [4642, 4654], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["First version (needs testing)"], "extent": [4654, 4692]}], "container": true}], "container": true}], "container": true}, {"type": "para", "indent": 0, "text": [{"type": "em", "text": ["interface version 1"]}, " \u2014"], "extent": [4692, 4719]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["2015-04-20"], "extent": [4719, 4731], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Resaved in H14."], "extent": [4731, 4753]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed major bug: only the first non-velocity field was processed, screwing up pyro sim retimes"], "extent": [4753, 4854]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Temporary fix: blending of density/heat/temperature fields are now hardwired (will be fixed later)"], "extent": [4854, 4960]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2015-01-19"], "extent": [4960, 4972], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Fixed major bug: retiming returned velocity fields only on frames outside of\n      the original volume range"], "extent": [4972, 5087]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added fixed visualization for each volume frame"], "extent": [5087, 5141]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added display density scale parameter"], "extent": [5141, 5186]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-05"], "extent": [5186, 5198], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Theres a three-way switch now, called ", {"type": "em", "text": ["Advection Mode"]}], "extent": [5198, 5259]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added frame range clamping (as in TimeShift SOP)"], "extent": [5259, 5314]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Optimization: no interpolation/blending for integer frames\n      (this also makes out-of-range results faster if range clamping is used)"], "extent": [5314, 5458]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-12-04"], "extent": [5458, 5470], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Improved speed when ", {"type": "em", "text": ["Advect by Velocity"]}, " is off (skipping internal dopnet altogether)"], "extent": [5470, 5563]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-11-22"], "extent": [5563, 5575], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Bug fix: velocity field was missing from output."], "extent": [5575, 5630]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Added post-advection scaling of velocity field\n      (so render-time motion blur will be adjusted to retimed speed)"], "extent": [5630, 5753]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["2014-11-19"], "extent": [5753, 5765], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["First version."], "extent": [5765, 5787]}], "container": true}], "container": true}], "container": true}]}], "title": ["Volume Retime qL"], "summary": ["Evaluates an already-simulated volumetric at any subframe, using velocity-based advection."]}