{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "neighborsearchcl", "icon": "SOP/neighborsearchcl", "since": "19.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Neighbor Search CL"], "extent": [105, 128]}, {"type": "summary", "indent": 0, "text": ["Finds neighboring points using OpenCL."], "extent": [128, 175]}, {"type": "para", "indent": 0, "text": ["The Neighbor Search CL SOP finds the neighboring points to the input points using OpenCL, usually much more quickly than the ", {"scheme": null, "value": "/vex/functions/pcfind", "type": "link", "text": ["pcfind"], "fullpath": "/vex/functions/pcfind.html"}, " VEX function. Note that this SOP only support uniform radius points, and requires several point attributes present to work correctly:"], "extent": [175, 466]}, {"type": "table", "thead": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["Type "], "role": "th", "extent": [466, 474], "container": true}, {"type": "cell", "indent": 4, "text": ["Name "], "role": "th", "extent": [474, 486], "container": true}, {"type": "cell", "indent": 8, "text": ["Description "], "role": "th", "extent": [486, 509]}], "divider": false}], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["float"]}, " "], "role": "td", "extent": [509, 520], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["pscale"]}, " "], "role": "td", "extent": [520, 535], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["The size of the points.  This value must be the same for all input points."], "extent": [535, 619]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["integer"]}, " "], "role": "td", "extent": [619, 631], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["phase"]}, " "], "role": "td", "extent": [631, 645], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["Indicates whether a point should be included in the search, as dictated by the ", {"type": "ui", "text": ["Source Phase"]}, " and ", {"type": "ui", "text": ["Destination Phase"]}, " parameters."], "extent": [645, 788]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["integer"]}, " "], "role": "td", "extent": [788, 800], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["isgrain"]}, " "], "role": "td", "extent": [800, 816], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["If the ", {"type": "code", "text": ["phase"]}, " attribute is missing, this attribute will be used instead."], "extent": [816, 899]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["integer array"]}, " "], "role": "td", "extent": [899, 917], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["neighbors"]}, " "], "role": "td", "extent": [917, 935], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["This SOP will fill this array with any neighbor particles within the ", {"type": "ui", "text": ["Radius Scale"]}, "."], "extent": [935, 1031]}]}], "divider": false}]}, {"type": "para", "indent": 0, "text": ["There are additional per-particle point attributes that can be used to control this node\u2019s behavior:"], "extent": [1031, 1133]}, {"type": "table", "thead": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": ["Type "], "role": "th", "extent": [1133, 1141], "container": true}, {"type": "cell", "indent": 4, "text": ["Name "], "role": "th", "extent": [1141, 1153], "container": true}, {"type": "cell", "indent": 8, "text": ["Description "], "role": "th", "extent": [1153, 1176]}], "divider": false}], "body": [{"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["string"]}, " "], "role": "td", "extent": [1176, 1188], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["name"]}, " "], "role": "td", "extent": [1188, 1201], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["Used when ", {"type": "ui", "text": ["Ignore Neighbors with Same Name or Piece"]}, " is enabled.  This attribute is used if present before ", {"type": "code", "text": ["piece"]}, "."], "extent": [1201, 1328]}]}], "divider": false}, {"type": "row", "body": [{"type": "cell", "indent": 0, "text": [{"type": "code", "text": ["integer"]}, " "], "role": "td", "extent": [1328, 1340], "container": true}, {"type": "cell", "indent": 4, "text": [{"type": "code", "text": ["piece"]}, " "], "role": "td", "extent": [1340, 1354], "container": true}, {"type": "cell", "role": "td", "body": [{"type": "para", "indent": 8, "text": ["Used when ", {"type": "ui", "text": ["Ignore Neighbors with Same Name or Piece"]}, " is enabled."], "extent": [1354, 1430]}]}], "divider": false}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [1430, 1442], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Radius Scale"], "extent": [1442, 1457], "body": [{"type": "para", "indent": 4, "text": ["The size of the neighborhood around each point to search for neighbors. This value is a scale on the particles' ", {"type": "code", "text": ["pscale"]}, " attribute."], "extent": [1479, 1616]}], "container": true, "attrs": {"id": "radiusscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Source Phase"], "extent": [1616, 1630], "body": [{"type": "para", "indent": 4, "text": ["Only points with this ", {"type": "code", "text": ["phase"]}, " attribute values will be considered as neighbors.  The default value of -1 will consider all points."], "extent": [1649, 1785]}], "container": true, "attrs": {"id": "srcphase"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Destination Phase"], "extent": [1785, 1804], "body": [{"type": "para", "indent": 4, "text": ["Only fill in the ", {"type": "code", "text": ["neighbors"]}, " array for points with this ", {"type": "code", "text": ["phase"]}, " attribute value.  The default value of -1 will find neighbors for all points."], "extent": [1823, 1970]}], "container": true, "attrs": {"id": "dstphase"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ignore Neighbors with Same Name or Piece"], "extent": [1970, 2012], "body": [{"type": "para", "indent": 4, "text": ["If enabled, look at the ", {"type": "code", "text": ["name"]}, " or ", {"type": "code", "text": ["piece"]}, " attribute for the current point and skip any neighbors with the same value. The ", {"type": "code", "text": ["name"]}, " attribute is used if both exist."], "extent": [2034, 2201]}], "container": true, "attrs": {"id": "ignorepiece"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Leave on GPU"], "extent": [2201, 2215], "body": [{"type": "para", "indent": 4, "text": ["Fill the ", {"type": "code", "text": ["neighbors"]}, " array, but do not transfer the values back to the CPU.  Enabling this option means CPU code (e.g. VEX) and the Geometry Spreadsheet will not see the values, but OpenCL code can access the array without the cost of copying large neighbor arrays back to the CPU."], "extent": [2236, 2523]}, {"type": "para", "indent": 4, "text": ["Note that in SOPs the GPU buffers are cleared outside of compiled\n    blocks; so if Leave on GPU is set you will need to have the OpenCL\n    SOP that uses it be in the same compiled SOP as it was created."], "extent": [2523, 2733]}], "container": true, "attrs": {"id": "leaveongpu"}, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [2733, 2742], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/sop/grainsource", "type": "link", "text": "", "fullpath": "/nodes/sop/grainsource.html"}], "extent": [2742, 2771]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/gasparticlefluiddensitycl", "type": "link", "text": "", "fullpath": "/nodes/dop/gasparticlefluiddensitycl.html"}], "extent": [2771, 2814]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": "Node", "value": "/nodes/dop/gasparticlefluidforcescl", "type": "link", "text": "", "fullpath": "/nodes/dop/gasparticlefluidforcescl.html"}], "extent": [2814, 2856]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": [{"scheme": null, "value": "/vex/functions/pcfind", "type": "link", "text": ["pcfind"], "fullpath": "/vex/functions/pcfind.html"}], "extent": [2856, 2894]}], "container": true}], "text": "Related"}], "title": ["Neighbor Search CL"], "summary": ["Finds neighboring points using OpenCL."]}