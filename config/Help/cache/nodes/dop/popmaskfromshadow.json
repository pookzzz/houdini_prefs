{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "popmaskfromwind", "icon": "DOP/popmaskfromwind", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["POP Mask from Shadow"], "extent": [90, 115]}, {"type": "summary", "indent": 0, "text": ["A POP node that creates a mask based on whether particles are occluded by geometry."], "extent": [115, 207]}, {"type": "para", "indent": 0, "text": ["This node sets a mask attribute based on whether a particle is occluded from geometry.\nTo do this, it performs a raycast from each particle in specified direction attribute. If\nthere is a hit within the distance specified by ", {"type": "ui", "text": ["Max Distance"]}, ", then the mask is\nset according to ", {"type": "ui", "text": ["Distance Falloff"]}, " evaluated at the hit distance."], "extent": [207, 537]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [537, 549], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Activation"], "extent": [45, 61], "body": [{"type": "para", "indent": 8, "text": ["Turns this node on and off. The node is only active if this\n        value is greater than 0. This is useful to control the effect of\n        this node with an ", {"scheme": null, "value": "/expressions/", "type": "link", "text": ["expression"], "fullpath": "/expressions/index.html"}, "."], "extent": [61, 265]}, {"type": "note_group", "body": [{"type": "note", "indent": 8, "role": "item", "extent": [265, 279], "body": [{"type": "para", "indent": 12, "text": ["This is activation of the node as a whole. You can\u2019t use this parameter to deactivate the node for certain particles."], "extent": [279, 410]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["Group"], "extent": [410, 421], "body": [{"type": "para", "indent": 8, "text": ["Only affect a group of points (created with, for example, a\n        ", {"scheme": "Node", "value": "/nodes/dop/popgroup", "type": "link", "text": ["Group POP"], "fullpath": "/nodes/dop/popgroup.html"}, " or ", {"scheme": "Node", "value": "/nodes/dop/popcollisiondetect", "type": "link", "text": ["Collision\n        Detection POP"], "fullpath": "/nodes/dop/popcollisiondetect.html"}, ") out of all the points in \n        the current stream."], "extent": [421, 648]}], "container": true, "role": "item"}], "container": true}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Parameters"], "extent": [592, 609], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 4, "text": ["Geometry Source"], "extent": [1534, 1555], "body": [{"type": "para", "indent": 8, "text": ["Specifies the geometry to use."], "extent": [1555, 1595]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 8, "text": ["SOP"], "extent": [1595, 1608], "body": [{"type": "para", "indent": 12, "text": ["Use the SOP specified in the ", {"type": "ui", "text": ["SOP Path"]}, " parameter."], "extent": [1608, 1674]}], "container": true}, {"type": "dt", "indent": 8, "text": ["DOP Objects"], "extent": [1674, 1695], "body": [{"type": "para", "indent": 12, "text": ["Use the named DOP object in this DOP network."], "extent": [1695, 1754]}], "container": true}, {"type": "dt", "indent": 8, "text": ["First Context Geometry"], "extent": [1754, 1786], "body": [{"type": "para", "indent": 12, "text": ["Use the SOP connected to the DOP network\u2019s first input."], "extent": [1786, 1855]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Second Context Geometry"], "extent": [1855, 1888], "body": [{"type": "para", "indent": 12, "text": ["Use the SOP connected to the DOP network\u2019s second input."], "extent": [1888, 1958]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Third Context Geometry"], "extent": [1958, 1990], "body": [{"type": "para", "indent": 12, "text": ["Use the SOP connected to the DOP network\u2019s third input."], "extent": [1990, 2059]}], "container": true}, {"type": "dt", "indent": 8, "text": ["Fourth Context Geometry"], "extent": [2059, 2092], "body": [{"type": "para", "indent": 12, "text": ["Use the SOP connected to the DOP network\u2019s fourth input."], "extent": [2092, 2162]}], "container": true}], "container": true}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["SOP Path"], "extent": [2162, 2176], "body": [{"type": "para", "indent": 8, "text": ["Path to the SOP (when ", {"type": "ui", "text": ["Geometry Source"]}, " is set to ", {"type": "ui", "text": ["SOP"]}, ")."], "extent": [2176, 2247]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 4, "text": ["DOP Objects"], "extent": [2247, 2264], "body": [{"type": "para", "indent": 8, "text": ["Name of the DOP objects (when ", {"type": "ui", "text": ["Geometry Source"]}, " is set to ", {"type": "ui", "text": ["DOP Object"]}, ")."], "extent": [2264, 2350]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Mask"], "extent": [656, 669], "body": [{"type": "para", "indent": 4, "text": ["This attribute is set to the ray hit distance from the particle, after mapping through the ", {"type": "ui", "text": ["Distance Falloff"]}, " ramp."], "extent": [690, 813]}, {"type": "para", "indent": 4, "text": ["In wind shadowing, this value is typically ", {"type": "code", "text": ["1"]}, ", indicating that the particle is fully occluded from the wind, with the value falling off towards ", {"type": "code", "text": ["0"]}, " as it gets farther from the geometry blocking the wind. "], "extent": [813, 1024]}], "container": true, "attrs": {"id": "mask_attrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadowed Velocity"], "extent": [1024, 1043], "body": [{"type": "para", "indent": 4, "text": ["If the ray hits, this attribute is set to the velocity of the point on the object that was hit. Otherwise, this is unchanged."], "extent": [1065, 1196]}, {"type": "para", "indent": 4, "text": ["This is used in wind shadowing to determine the velocity the particle should have when it is in shadow."], "extent": [1196, 1309]}], "container": true, "attrs": {"id": "maskv_attrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Hit Distance"], "extent": [1309, 1330], "body": [{"type": "para", "indent": 4, "text": ["This attribute is set to the distance that the ray hit on the ", {"type": "ui", "text": ["Collision Geometry"]}, "."], "extent": [1358, 1449]}], "container": true, "attrs": {"id": "maskhitdist_attrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Affect Existing Mask"], "extent": [1449, 1471], "body": [{"type": "para", "indent": 4, "text": ["How to combine the new mask with any existing wind shadow mask."], "extent": [1490, 1559]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Replace"], "extent": [1559, 1572], "body": [{"type": "para", "indent": 8, "text": ["The old mask is cleared out and replaced by the new one."], "extent": [1572, 1638]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Nearest"], "extent": [1638, 1651], "body": [{"type": "para", "indent": 8, "text": ["The distance attribute is used to keep the mask and velocity value of whichever is closest."], "extent": [1651, 1756]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "combineop"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ray Direction"], "extent": [1756, 1771], "body": [{"type": "para", "indent": 4, "text": ["The direction in which to perform the raycast."], "extent": [1794, 1846]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Backwards"], "extent": [1846, 1861], "body": [{"type": "para", "indent": 8, "text": ["In the opposite direction of the backward direction attribute."], "extent": [1861, 1941]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Forward"], "extent": [1941, 1954], "body": [{"type": "para", "indent": 8, "text": ["In the same direction as forward direction attribute."], "extent": [1954, 2025]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Relative"], "extent": [2025, 2039], "body": [{"type": "para", "indent": 8, "text": ["The forward direction attribute has the backward attribute subtracted from it, and that is the ray cast direction."], "extent": [2039, 2171]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "scandirection"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Backwards Direction"], "extent": [2171, 2192], "body": [{"type": "para", "indent": 4, "text": ["The ray is sent in the opposite direction of this attribute."], "extent": [2220, 2290]}], "container": true, "attrs": {"id": "backwarddir_attrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Forward Direction"], "extent": [2290, 2309], "body": [{"type": "para", "indent": 4, "text": ["The ray is sent in the direction of this attribute."], "extent": [2336, 2393]}], "container": true, "attrs": {"id": "forwarddir_attrib"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Mask Amount"], "extent": [2393, 2406], "body": [{"type": "para", "indent": 4, "text": ["Scale the final mask value by this.  A value of zero disables the update."], "extent": [2425, 2508]}], "container": true, "attrs": {"id": "mask"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Distance"], "extent": [2508, 2522], "body": [{"type": "para", "indent": 4, "text": ["The maximum distance to check for occlusions."], "extent": [2549, 2604]}], "container": true, "attrs": {"id": "maxshadowdistance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Ray Bias"], "extent": [2604, 2614], "body": [{"type": "para", "indent": 4, "text": ["The distance to offset the ray from the particle. This is used to avoid self intersections if the node is used for self wind shadow."], "extent": [2631, 2769]}], "container": true, "attrs": {"id": "raybias"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Angle"], "extent": [2769, 2783], "body": [{"type": "para", "indent": 4, "text": ["The spread to send shadow rays.  A value of ", {"type": "code", "text": ["90"]}, " will sample the full hemisphere, and a value of ", {"type": "code", "text": ["180"]}, " will send rays in all directions."], "extent": [2803, 2945]}], "container": true, "attrs": {"id": "coneangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Shadow Samples"], "extent": [2945, 2961], "body": [{"type": "para", "indent": 4, "text": ["Number of samples to send randomly within the cone angle.  If the cone angle is zero, only one sample will be taken."], "extent": [2978, 3104]}], "container": true, "attrs": {"id": "samples"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Distance Falloff"], "extent": [3104, 3122], "body": [{"type": "para", "indent": 4, "text": ["This ramp maps the distance of the particle to the to the output value of the mask."], "extent": [3143, 3236]}], "container": true, "attrs": {"id": "maskfalloff"}, "role": "item"}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bindings"], "extent": [3236, 3251], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Geometry"], "extent": [3251, 3262], "body": [{"type": "para", "indent": 4, "text": ["The name of the simulation data to apply the POP node to.\n    This is commonly Geometry, but POP Networks can be designed to apply to different geometry."], "extent": [3279, 3442]}], "container": true, "attrs": {"id": "bindgeo"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [3442, 3451], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/dop/popwindshadow", "type": "link", "text": "", "fullpath": "/nodes/dop/popwindshadow.html"}], "extent": [3451, 3479]}], "container": true}], "text": "Related"}], "title": ["POP Mask from Shadow"], "summary": ["A POP node that creates a mask based on whether particles are occluded by geometry."], "included": ["/nodes/dop/standard_pop_parms"]}